{
  "comments": [
    {
      "key": {
        "uuid": "11a4a42a_2816598e",
        "filename": "catalog-be/src/main/java/org/openecomp/sdc/be/tosca/CsarUtils.java",
        "patchSetId": 1
      },
      "lineNbr": 498,
      "author": {
        "id": 6614
      },
      "writtenOn": "2020-08-07T11:07:25Z",
      "side": 0,
      "message": "@Sebastien The bug is probably here. It should be `writeIf(!isAtomicComponent(e.component))`.",
      "revId": "f4165e2af8ae596d574aecae2fcf174420396b2e",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "06eeb60b_88fef8b7",
        "filename": "catalog-be/src/main/java/org/openecomp/sdc/be/tosca/CsarUtils.java",
        "patchSetId": 1
      },
      "lineNbr": 498,
      "author": {
        "id": 23
      },
      "writtenOn": "2020-08-07T11:52:23Z",
      "side": 0,
      "message": "Julien will test that this afternoon and add a test, if it\u0027s fine we could abandon the revert.\nSorry, we just want to progress here, we have to many PRs opened and without the tests it\u0027s difficult to see if it\u0027s stable or not :-)\n\nThanks",
      "parentUuid": "11a4a42a_2816598e",
      "revId": "f4165e2af8ae596d574aecae2fcf174420396b2e",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "78c2c095_95e63ca2",
        "filename": "catalog-be/src/main/java/org/openecomp/sdc/be/tosca/CsarUtils.java",
        "patchSetId": 1
      },
      "lineNbr": 498,
      "author": {
        "id": 15
      },
      "writtenOn": "2020-08-07T13:33:17Z",
      "side": 0,
      "message": "I\u0027m afraid it still fails with `writeIf(!isAtomicComponent(e.component))`\n\n```\norg.onap.sdc.tosca.parser.exceptions.SdcToscaParserException: Error: CSAR file bad format. Check the log for details.\n\tat org.onap.sdc.tosca.parser.impl.SdcToscaParserFactory.throwSdcToscaParserException(SdcToscaParserFactory.java:217)\n\tat org.onap.sdc.tosca.parser.impl.SdcToscaParserFactory.init(SdcToscaParserFactory.java:110)\n\tat org.onap.sdc.tosca.parser.impl.SdcToscaParserFactory.getSdcCsarHelper(SdcToscaParserFactory.java:81)\n\tat org.openecomp.sdc.ci.tests.utils.general.AtomicOperationUtils.toscaValidation(AtomicOperationUtils.java:394)\n\tat org.openecomp.sdc.ci.tests.sanity.Onboard.runOnboardToDistributionFlow(Onboard.java:124)\n\tat org.openecomp.sdc.ci.tests.sanity.Onboard.onboardPNFFlow(Onboard.java:84)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:124)\n\tat org.testng.internal.Invoker.invokeMethod(Invoker.java:583)\n\tat org.testng.internal.Invoker.invokeTestMethod(Invoker.java:719)\n\tat org.testng.internal.TestMethodWithDataProviderMethodWorker.call(TestMethodWithDataProviderMethodWorker.java:71)\n\tat org.testng.internal.TestMethodWithDataProviderMethodWorker.call(TestMethodWithDataProviderMethodWorker.java:14)\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n\tat java.lang.Thread.run(Thread.java:748)\n```\n\n\nIf you want to reproduce you can get the full test with\n\n\n```\nsudo ./docker_run.sh -e AUTO -l\nsudo ./docker_run.sh -e AUTO -l -d sdc-sim -sim\nsudo ./docker_run.sh -e AUTO -l -d sdc-api-tests -tad\nfirefox /data/logs/sdc-api-tests/ExtentReport/SDC_CI_Extent_Report.html\n```\n\nI totally agree with you Francis that the best course of action is to reproduce the issue in a test and fix it. But in the mean time, it makes it even more time consumming to review merge requests\nAnother issue is that those tests aren\u0027t integrated which how it was missed in the first place",
      "parentUuid": "06eeb60b_88fef8b7",
      "revId": "f4165e2af8ae596d574aecae2fcf174420396b2e",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b1a7a37e_2e5b33b2",
        "filename": "catalog-be/src/main/java/org/openecomp/sdc/be/tosca/CsarUtils.java",
        "patchSetId": 1
      },
      "lineNbr": 498,
      "author": {
        "id": 6614
      },
      "writtenOn": "2020-08-07T16:08:41Z",
      "side": 0,
      "message": "No worries at all, I am the one who introduced the bug in the first place, and am really sorry for all the trouble.\n\nHave you checked if it works by branching right before this commit? Also it seems the error is different this time (isn\u0027t it?). SÃ©bastien initially mentioned a file cannot be retrieved but in this case, it seems to be malformed. Could you please confirm these assumptions?\n\nThanks in advance.",
      "parentUuid": "06eeb60b_88fef8b7",
      "revId": "f4165e2af8ae596d574aecae2fcf174420396b2e",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "360a6235_78f6ef2b",
        "filename": "catalog-be/src/main/java/org/openecomp/sdc/be/tosca/CsarUtils.java",
        "patchSetId": 1
      },
      "lineNbr": 498,
      "author": {
        "id": 15
      },
      "writtenOn": "2020-08-09T18:40:22Z",
      "side": 0,
      "message": "It can happen to anyone, and it was reviewed and merged :)\nYes I tried before the commit, and I didn\u0027t had this issue. \nFor the file that can\u0027t be reviewed, I believe that it\u0027s a misunderstanding, as Seb and I were looking at this issue. For me it\u0027s the same issue that I saw on master\n\nThanks for your time !",
      "parentUuid": "b1a7a37e_2e5b33b2",
      "revId": "f4165e2af8ae596d574aecae2fcf174420396b2e",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "341f35bc_39d62f06",
        "filename": "catalog-be/src/main/java/org/openecomp/sdc/be/tosca/CsarUtils.java",
        "patchSetId": 1
      },
      "lineNbr": 498,
      "author": {
        "id": 6614
      },
      "writtenOn": "2020-08-10T11:08:51Z",
      "side": 0,
      "message": "Hi!\n\nI\u0027m gonna spend the next hour trying to figure out what is going on, and if I don\u0027t find anything, let you guys revert this. Is that alright? Or do you need to do this ASAP?",
      "parentUuid": "360a6235_78f6ef2b",
      "revId": "f4165e2af8ae596d574aecae2fcf174420396b2e",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f3f6cae2_a8cf66c3",
        "filename": "catalog-be/src/main/java/org/openecomp/sdc/be/tosca/CsarUtils.java",
        "patchSetId": 1
      },
      "lineNbr": 498,
      "author": {
        "id": 6614
      },
      "writtenOn": "2020-08-10T12:33:49Z",
      "side": 0,
      "message": "I\u0027m not able to run the sanity tests from here despite the instructions in the documentation. I won\u0027t have the time to dig further today unfortunately so  let\u0027s go on with the revert.\n\nIdeally, a test should be created for this case as nothing prevents us from breaking CsarUtils currently. Considering the high level of technical debt this class contains, this is critical.",
      "parentUuid": "341f35bc_39d62f06",
      "revId": "f4165e2af8ae596d574aecae2fcf174420396b2e",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    }
  ]
}