tosca_definitions_version: tosca_simple_profile_for_ecomp_1_0

description: vECA VF Topology Template

metadata:
  invariantUUID: 3d4f3d68-d3a3-4f52-127c-ab188c9d4da2 # generated by ASDC
  UUID: a2c4dc32-9c16-a3df-d2c0-e5ab221c69f0 # generated by ASDC
  name: vECA VF
  description: |
                        Performs intelligent adaptation of Multimedia Messages (MMs), and adaptation of individual media, 
                        such as videos, audio files, images, animations, and text. Sits on the MM1 downlink path and performs
                        optimization offline. It intercepts the entire media and completes the optimizations before sending
                        the message to handsets.
  type: VF
  category: Mobility
  subCategory: MMSC
  vendor: Nokia
  vendorVersion: 13

  
 # reference to template definitions
imports:
  - tosca_simple_profile_for_ecomp_1_0.yml
  
topology_template:
  
   # This section provides the parameters which OPENECOMP is not providing values to during instantiation.
   # It is expected that node template parameters which are not mapped to the Inputs section recieve value from OPENECOMP
   # during the orchestration

  inputs: 
    
  node_templates:

    vECA_OAM: # vECA OAM VFC
      type: org.openecomp.resource.vfc.Generic

      metadata:
        invariantUUID: 12243d33-d3a3-4f42-770a-5710009d3baa
        UUID: ab08dc12-0716-abcf-13c0-afd4111c69a0
        version: 1.0
        name: vECA_OAM VFC
        description: ECA Management
        type: VFC
        category: Generic_VFC
        subCategory: Generic_VFC
        vendor: Nokia
        vendorVersion: 13
      
      properties:
        vfc_ecomp_name: true
        vfc_instance_name: # to be set by OPENECOMP during instantiation
        vfc_type_tag:  # from HEAT ENV
        vfc_description: vECA_OAM VFC
        vfc_image_name: eca-v13-release.qcow2 # from HEAT / HEAT ENV
        vfc_availability_zone: 


      capabilities:
        nfv_compute:
          properties:
            vfc_flavor: eca_oam_flavor # from HEAT ENV
        scaling:
          properties:
            min_instances: 2 # set by service designer
            max_instances: 2 # set by service designer

    vECA_ARB: # vECA ARB VFC
      type: org.openecomp.resource.vfc.Generic

      metadata:
        invariantUUID: 0ab53d33-d3a3-4f42-770a-5710009d301a
        UUID: 8808dc12-0716-abcf-23c0-afd4111c60d0
        version: 1.0
        name: vECA_ARB VFC
        description: ECA Arbitrator
        type: VFC
        category: Generic_VFC
        subCategory: Generic_VFC
        vendor: Nokia
        vendorVersion: 13
      
      properties:
        vfc_ecomp_name: true
        vfc_instance_name: # to be set by OPENECOMP during instantiation
        vfc_type_tag:  # from HEAT ENV
        vfc_description: vECA_ABR VFC
        vfc_image_name: eca-v13-release.qcow2 # from HEAT / HEAT ENV
        vfc_availability_zone: 


      
      capabilities:
        nfv_compute:
          properties:
            vfc_flavor: eca_arb_flavor # from HEAT ENV
        scaling:
          properties:
            min_instances: 1 # set by service designer
            max_instances: 1 # set by service designer

   #  Internal VF Connection Points (VFCs connection points)

    eca_oam_oam:
      type: org.openecomp.cp.OAM
      
      metadata:
        invariantUUID: 553f8d08-2223-4a97-127c-11ab729d1234 # generated by ASDC
        UUID: ab14db52-2116-a3af-1240-a236221ca82a # generated by ASDC
        version: 1.0 # set by ASDC
        name: VFC CP
        description: VFC CP
        type: CP
        category: CP
        vendor: AT&T
      
      properties:
        address_info:
          mac_address: # provided by OPENECOMP (SDNC)
      


    eca_oam_internal:
      type: org.openecomp.cp.CP
      
      metadata:
        invariantUUID: 55df8d08-2ab3-4a97-127c-11ab729d100a # generated by ASDC
        UUID: 12b4db52-2116-b5af-1240-a236221ca145 # generated by ASDC
        version: 1.0 # set by ASDC
        name: VFC CP
        description: VFC CP
        type: CP
        category: CP
        vendor: AT&T
      
      properties:
        address_info:
          mac_address: # provided by OPENECOMP (SDNC)
      


    eca_arb_oam:
      type: org.openecomp.cp.OAM
      
      metadata:
        invariantUUID: 553f8d08-2223-4a97-127c-11ab729d1234 # generated by ASDC
        UUID: ab14db52-2116-a3af-1240-a236221ca82a # generated by ASDC
        version: 1.0 # set by ASDC
        name: OAM CP
        description: OAM CP
        type: CP
        category: CP
        vendor: AT&T
      properties:
        address_Info:
          ip_address:  # provided by OPENECOMP (SDNC)


    eca_arb_internal:
      type: org.openecomp.cp.CP
      
      metadata:
        invariantUUID: 55df8d08-2ab3-4a97-127c-11ab729d100a # generated by ASDC
        UUID: 12b4db52-2116-b5af-1240-a236221ca145 # generated by ASDC
        version: 1.0 # set by ASDC
        name: VFC CP
        description: VFC CP
        type: CP
        category: CP
        vendor: AT&T
      
      properties:
        address_info:
          mac_address: # provided by OPENECOMP (SDNC)
      


  groups:

    # VF Modules

    VFModuleECA_OAM_Base:
      type: org.openecomp.groups.VfModule

      metadata:
        vfModuleModelName: vECA::module-0
        vfModuleModelInvariantUUID: 13aba10a-f788-492f-9ea7-7ff91dd05aaa
        vfModuleModelUUID: 1230ed1e-4bc7-4fc0-ba7e-cc7af6da7000
        vfModuleModelVersion: 1

      properties:
        vf_module_type: Base # set by service designer
        vf_module_description: vECA Base VF Module # set by service designer
        contrail_service_instance: true # from HEAT
        availability_zone_count: 1 # from HEAT
        volume_group: false # from HEAT / service Designer
        artifacts: # HEAT Templates
          - 099a6909-290f-4293-a347-736f11b8ff18
          - 0db84f21-d298-4a4b-b11e-37b92a734066
      
      members:
      - vECA_OAM
      - vECA_ARB
      - eca_arb_internal
      - eca_arb_oam
      - eca_oam_oam
      - eca_oam_internal
  policies:
     # Placement policy
    - mmsc_anti_affinity_placement_policy:
      type: org.openecomp.policy.Placement

      properties:
        conatiner_type: compute
        policy: anti_affinity

      target: [vECA_OAM, vECA_ARB ]