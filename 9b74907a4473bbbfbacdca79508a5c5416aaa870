{
  "comments": [
    {
      "key": {
        "uuid": "3a3d6d14_e1d332d8",
        "filename": "catalog-be/src/main/java/org/openecomp/sdc/be/components/impl/ComponentBusinessLogic.java",
        "patchSetId": 1
      },
      "lineNbr": 454,
      "author": {
        "id": 6614
      },
      "writtenOn": "2020-05-14T23:11:03Z",
      "side": 1,
      "message": "Isn\u0027t it simpler using a method? It seems we need to call apply every time we want to use this function.\n\nUsually I use the type `FunctionX` whenever I need to pass the function in question to some higher order function, in order to reduce the boilerplate, but in this case, and please correct me if I am wrong, we never pass it to an HO function. Is that right?",
      "revId": "9b74907a4473bbbfbacdca79508a5c5416aaa870",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "68d7dd7d_46028c14",
        "filename": "catalog-be/src/main/java/org/openecomp/sdc/be/components/impl/ComponentBusinessLogic.java",
        "patchSetId": 1
      },
      "lineNbr": 454,
      "author": {
        "id": 6597
      },
      "writtenOn": "2020-05-14T23:48:12Z",
      "side": 1,
      "message": "You\u0027re right: it\u0027d be easier to read and we don\u0027t have type erasure then.",
      "parentUuid": "3a3d6d14_e1d332d8",
      "revId": "9b74907a4473bbbfbacdca79508a5c5416aaa870",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e7954706_f33426d5",
        "filename": "catalog-be/src/main/java/org/openecomp/sdc/be/components/impl/ComponentBusinessLogic.java",
        "patchSetId": 1
      },
      "lineNbr": 489,
      "author": {
        "id": 6614
      },
      "writtenOn": "2020-05-14T23:11:03Z",
      "side": 1,
      "message": "You could improve this using Either\u0027s combinators.\n```\nresult.left().foreach(def -\u003e\n  component.getToscaArtifacts().put(def.getArtifactLabel(), def)\n)\n```",
      "revId": "9b74907a4473bbbfbacdca79508a5c5416aaa870",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3e688d5c_fc46ae8e",
        "filename": "catalog-be/src/main/java/org/openecomp/sdc/be/components/impl/ComponentBusinessLogic.java",
        "patchSetId": 1
      },
      "lineNbr": 489,
      "author": {
        "id": 6597
      },
      "writtenOn": "2020-05-14T23:48:12Z",
      "side": 1,
      "message": "I actually did it initially but then noticed that \u0027foreach\u0027 expects a return type of Unit so we have to add another line to do `return Unit.unit()`.\nThe result was pretty verbose and I decide to go for a more \u0027procedural\u0027 approach as it\u0027s more common on the project.",
      "parentUuid": "e7954706_f33426d5",
      "revId": "9b74907a4473bbbfbacdca79508a5c5416aaa870",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "29b1ee27_044b52af",
        "filename": "catalog-be/src/main/java/org/openecomp/sdc/be/components/impl/ComponentBusinessLogic.java",
        "patchSetId": 1
      },
      "lineNbr": 516,
      "author": {
        "id": 5562
      },
      "writtenOn": "2020-05-14T15:45:39Z",
      "side": 1,
      "message": "shouldn\u0027t be those methods are private, bcz called within same class and/or by private methods? and \u0027test\u0027 them by calling public methods?",
      "range": {
        "startLine": 474,
        "startChar": 3,
        "endLine": 516,
        "endChar": 0
      },
      "revId": "9b74907a4473bbbfbacdca79508a5c5416aaa870",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5d547eed_e33741ea",
        "filename": "catalog-be/src/main/java/org/openecomp/sdc/be/components/impl/ComponentBusinessLogic.java",
        "patchSetId": 1
      },
      "lineNbr": 516,
      "author": {
        "id": 6597
      },
      "writtenOn": "2020-05-14T15:58:13Z",
      "side": 1,
      "message": "I thought about this as well and decided to leave them as public as these methods don\u0027t have any side-effects and leaving them public is not going to change any internal state.\nHowever, if you have suggestions on how to do what you describe in a simple manner, I am open to them!",
      "parentUuid": "29b1ee27_044b52af",
      "range": {
        "startLine": 474,
        "startChar": 3,
        "endLine": 516,
        "endChar": 0
      },
      "revId": "9b74907a4473bbbfbacdca79508a5c5416aaa870",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0fb4e85d_b5daf563",
        "filename": "catalog-be/src/main/java/org/openecomp/sdc/be/components/impl/ComponentBusinessLogic.java",
        "patchSetId": 1
      },
      "lineNbr": 516,
      "author": {
        "id": 5562
      },
      "writtenOn": "2020-05-14T17:23:07Z",
      "side": 1,
      "message": "...by covering populateToscaArtifacts (L437), populateToscaArtifacts (L441) and getToscaModelByComponentUuid (L526) you can cover all your new private functions, and as you can see from https://sonarcloud.io/code?id\u003donap_sdc\u0026selected\u003donap_sdc%3Acatalog-be%2Fsrc%2Fmain%2Fjava%2Forg%2Fopenecomp%2Fsdc%2Fbe%2Fcomponents%2Fimpl%2FComponentBusinessLogic.java\nnone of them is covered. \nI hope I answered your question.",
      "parentUuid": "5d547eed_e33741ea",
      "range": {
        "startLine": 474,
        "startChar": 3,
        "endLine": 516,
        "endChar": 0
      },
      "revId": "9b74907a4473bbbfbacdca79508a5c5416aaa870",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "973fb596_282d5462",
        "filename": "catalog-be/src/main/java/org/openecomp/sdc/be/components/impl/ComponentBusinessLogic.java",
        "patchSetId": 1
      },
      "lineNbr": 516,
      "author": {
        "id": 6597
      },
      "writtenOn": "2020-05-14T18:07:51Z",
      "side": 1,
      "message": "Covering the methods you mention is not the goal of the change request: the goal is to take care of unchecked calls to \u0027Optional.get()\u0027 (there is, I believe, already a task to improve code coverage).\nHowever, in order to be a good citizen on the project, I decided to create unit tests for the code I modify. To do that, I made my pure functions public so I could call them from a separate test class.\nI propose to switch the visibility of these methods to package-access only so they would be testable, writing proper tests for the mentioned methods would be a task of its own IMPO.",
      "parentUuid": "0fb4e85d_b5daf563",
      "range": {
        "startLine": 474,
        "startChar": 3,
        "endLine": 516,
        "endChar": 0
      },
      "revId": "9b74907a4473bbbfbacdca79508a5c5416aaa870",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d5ba3c8d_402a8a08",
        "filename": "catalog-be/src/main/java/org/openecomp/sdc/be/components/impl/ComponentBusinessLogic.java",
        "patchSetId": 1
      },
      "lineNbr": 516,
      "author": {
        "id": 5562
      },
      "writtenOn": "2020-05-14T19:06:06Z",
      "side": 1,
      "message": "\"Covering the methods you mention is not the goal of the change request\", never said it is. \nYes, it should be goal of different commit.\nBut creating \"public static\" methods only for be visible for testing, it is not best way, IMPO.\nI\u0027d suggest to change to private (non-static), and test them from public, (of cause, on different commit), remove needless tests.\nHow does it sound to you?",
      "parentUuid": "973fb596_282d5462",
      "range": {
        "startLine": 474,
        "startChar": 3,
        "endLine": 516,
        "endChar": 0
      },
      "revId": "9b74907a4473bbbfbacdca79508a5c5416aaa870",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1dc766ab_dcf72f03",
        "filename": "catalog-be/src/main/java/org/openecomp/sdc/be/components/impl/ComponentBusinessLogic.java",
        "patchSetId": 1
      },
      "lineNbr": 516,
      "author": {
        "id": 6597
      },
      "writtenOn": "2020-05-14T21:12:21Z",
      "side": 1,
      "message": "Not sure why you want to make them non-static as their behaviour is not specific to a particular instance: is having them static causing a problem I am not aware of?\n\nSo, to recap, you suggest to:\n1) Make these methods private.\n2) Delete the existing tests for these methods.\n3) Create a separate task for someone to improve the coverage of this class.\nAm I understanding your suggestion properly?",
      "parentUuid": "d5ba3c8d_402a8a08",
      "range": {
        "startLine": 474,
        "startChar": 3,
        "endLine": 516,
        "endChar": 0
      },
      "revId": "9b74907a4473bbbfbacdca79508a5c5416aaa870",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ae22807b_37590a3f",
        "filename": "catalog-be/src/main/java/org/openecomp/sdc/be/components/impl/ComponentBusinessLogic.java",
        "patchSetId": 1
      },
      "lineNbr": 516,
      "author": {
        "id": 6614
      },
      "writtenOn": "2020-05-14T23:11:03Z",
      "side": 1,
      "message": "@Vasyl, @Chris\n\nIn this case, I would usually keep the new functions private and static and get rid of the tests as adding more public functions means more test (and more code to maintain).\n\nHaving said that, the public functions (`populateToscaArtifacts` and `getToscaModelByComponentUuid`) are pretty hard to test and this would probably require an additional change. First of all, injecting dependencies for `componentsUtils`, `toscaOperationFacade`, and `artifactsBusinessLogic` should be done among others. Then additional guarantees regarding the privates functions should be done (eg. nulls are never returned, exceptions are never thrown), finally, I have not checked yet and this is just an assumption, but considering how the logic is implemented in these functions, the tests will happen to be quiet complicated to code due to a high level of technical debt.\n\nSo I would suggest to keep the tests and the new functions as they are (because it\u0027s still better than nothing), and open a new task for a thorough re-design of the `populateToscaArtifacts` and `getToscaModelByComponentUuid` function.\n\nAt some point we have to acknowledge that the level of quality of this codebase is pretty low (which is confirmed by Sonar), and that we can make progress only by making baby steps.",
      "parentUuid": "1dc766ab_dcf72f03",
      "range": {
        "startLine": 474,
        "startChar": 3,
        "endLine": 516,
        "endChar": 0
      },
      "revId": "9b74907a4473bbbfbacdca79508a5c5416aaa870",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    }
  ]
}