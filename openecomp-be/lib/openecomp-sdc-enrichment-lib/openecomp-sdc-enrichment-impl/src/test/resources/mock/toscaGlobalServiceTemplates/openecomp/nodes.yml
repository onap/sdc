#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#      http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#

tosca_definitions_version: tosca_simple_openecomp_1_0

metadata:
  filename: openecomp/nodes.yml
  version: '1.0'
  
imports:
- openecomp_index:
    file: _index.yml

node_types:

  org.openecomp.resource.vl.nodes.network.Network:
    derived_from: tosca.nodes.network.Network
    properties:
      vendor:
        type: string
        required: false
      vl_name:
        type: string
        required: false
    capabilities:
      end_point:
        type: tosca.capabilities.Endpoint

  org.openecomp.resource.abstract.nodes.AbstractSubstitute:
    derived_from: tosca.nodes.Root
    properties:
      service_template_filter:
        description: Substitution Filter
        type: org.openecomp.datatypes.substitution.SubstitutionFiltering
        status: supported
        required: true

  org.openecomp.resource.vl.extVL:
    derived_from: org.openecomp.resource.vl.nodes.network.Network
    description: VF Tenant oam protected network
    properties:
      network_type:
        description: OPENECOMP supported network types.
        type: string
        required: true
      network_role:
        description: |
          Unique label that defines the role that this network performs.   example: vce oam network, vnat sr-iov1 network
        type: string
        required: true
      network_scope:
        description: |
          Uniquely identifies the network scope. Valid values for the network scope   includes: VF - VF-level network. Intra-VF network which connects the VFCs (VMs) inside the VF. SERVICE - Service-level network. Intra-Service network which connects  the VFs within the service GLOBAL - Global network which can be shared by multiple services
        type: string
        constraints:
        - valid_values:
          - VF
          - SERVICE
          - GLOBAL
      network_technology:
        description: OPENECOMP supported network technology
        type: string
        required: true
      network_ecomp_naming:
        type: org.openecomp.datatypes.EcompNaming
        required: true
      network_homing:
        type: org.openecomp.datatypes.EcompHoming
        required: true
      network_assignments:
        type: org.openecomp.datatypes.network.NetworkAssignments
        required: true
      provider_network:
        type: org.openecomp.datatypes.network.ProviderNetwork
        required: true
      network_flows:
        type: org.openecomp.datatypes.network.NetworkFlows
        required: false


  org.openecomp.resource.vfc.nodes.Compute:
    derived_from: tosca.nodes.Compute
    capabilities:
      disk.ephemeral.size:
        description: A node type that includes the Metric capability indicates that it can be monitored using ceilometer.
        type: org.openecomp.capabilities.metric.Ceilometer
        occurrences:
        - 1
        - UNBOUNDED
      instance:
        description: A node type that includes the Metric capability indicates that it can be monitored using ceilometer.
        type: org.openecomp.capabilities.metric.Ceilometer
        occurrences:
        - 1
        - UNBOUNDED
      memory:
        description: A node type that includes the Metric capability indicates that it can be monitored using ceilometer.
        type: org.openecomp.capabilities.metric.Ceilometer
        occurrences:
        - 1
        - UNBOUNDED
      disk.iops:
        description: A node type that includes the Metric capability indicates that it can be monitored using ceilometer.
        type: org.openecomp.capabilities.metric.Ceilometer
        occurrences:
        - 1
        - UNBOUNDED
      disk.device.read.requests:
        description: A node type that includes the Metric capability indicates that it can be monitored using ceilometer.
        type: org.openecomp.capabilities.metric.Ceilometer
        occurrences:
        - 1
        - UNBOUNDED
      cpu.delta:
        description: A node type that includes the Metric capability indicates that it can be monitored using ceilometer.
        type: org.openecomp.capabilities.metric.Ceilometer
        occurrences:
        - 1
        - UNBOUNDED
      disk.capacity:
        description: A node type that includes the Metric capability indicates that it can be monitored using ceilometer.
        type: org.openecomp.capabilities.metric.Ceilometer
        occurrences:
        - 1
        - UNBOUNDED
      disk.device.read.bytes:
        description: A node type that includes the Metric capability indicates that it can be monitored using ceilometer.
        type: org.openecomp.capabilities.metric.Ceilometer
        occurrences:
        - 1
        - UNBOUNDED
      disk.write.bytes:
        description: A node type that includes the Metric capability indicates that it can be monitored using ceilometer.
        type: org.openecomp.capabilities.metric.Ceilometer
        occurrences:
        - 1
        - UNBOUNDED
      disk.latency:
        description: A node type that includes the Metric capability indicates that it can be monitored using ceilometer.
        type: org.openecomp.capabilities.metric.Ceilometer
        occurrences:
        - 1
        - UNBOUNDED
      disk.device.read.bytes.rate:
        description: A node type that includes the Metric capability indicates that it can be monitored using ceilometer.
        type: org.openecomp.capabilities.metric.Ceilometer
        occurrences:
        - 1
        - UNBOUNDED
      disk.usage:
        description: A node type that includes the Metric capability indicates that it can be monitored using ceilometer.
        type: org.openecomp.capabilities.metric.Ceilometer
        occurrences:
        - 1
        - UNBOUNDED
      cpu_util:
        description: A node type that includes the Metric capability indicates that it can be monitored using ceilometer.
        type: org.openecomp.capabilities.metric.Ceilometer
        occurrences:
        - 1
        - UNBOUNDED
      disk.device.allocation:
        description: A node type that includes the Metric capability indicates that it can be monitored using ceilometer.
        type: org.openecomp.capabilities.metric.Ceilometer
        occurrences:
        - 1
        - UNBOUNDED
      disk.write.requests.rate:
        description: A node type that includes the Metric capability indicates that it can be monitored using ceilometer.
        type: org.openecomp.capabilities.metric.Ceilometer
        occurrences:
        - 1
        - UNBOUNDED
      disk.write.bytes.rate:
        description: A node type that includes the Metric capability indicates that it can be monitored using ceilometer.
        type: org.openecomp.capabilities.metric.Ceilometer
        occurrences:
        - 1
        - UNBOUNDED
      disk.device.latency:
        description: A node type that includes the Metric capability indicates that it can be monitored using ceilometer.
        type: org.openecomp.capabilities.metric.Ceilometer
        occurrences:
        - 1
        - UNBOUNDED
      cpu:
        description: A node type that includes the Metric capability indicates that it can be monitored using ceilometer.
        type: org.openecomp.capabilities.metric.Ceilometer
        occurrences:
        - 1
        - UNBOUNDED
      disk.device.write.requests:
        description: A node type that includes the Metric capability indicates that it can be monitored using ceilometer.
        type: org.openecomp.capabilities.metric.Ceilometer
        occurrences:
        - 1
        - UNBOUNDED
      disk.device.write.bytes:
        description: A node type that includes the Metric capability indicates that it can be monitored using ceilometer.
        type: org.openecomp.capabilities.metric.Ceilometer
        occurrences:
        - 1
        - UNBOUNDED
      disk.read.requests:
        description: A node type that includes the Metric capability indicates that it can be monitored using ceilometer.
        type: org.openecomp.capabilities.metric.Ceilometer
        occurrences:
        - 1
        - UNBOUNDED
      disk.root.size:
        description: A node type that includes the Metric capability indicates that it can be monitored using ceilometer.
        type: org.openecomp.capabilities.metric.Ceilometer
        occurrences:
        - 1
        - UNBOUNDED
      disk.device.write.bytes.rate:
        description: A node type that includes the Metric capability indicates that it can be monitored using ceilometer.
        type: org.openecomp.capabilities.metric.Ceilometer
        occurrences:
        - 1
        - UNBOUNDED
      vcpus:
        description: A node type that includes the Metric capability indicates that it can be monitored using ceilometer.
        type: org.openecomp.capabilities.metric.Ceilometer
        occurrences:
        - 1
        - UNBOUNDED
      disk.device.iops:
        description: A node type that includes the Metric capability indicates that it can be monitored using ceilometer.
        type: org.openecomp.capabilities.metric.Ceilometer
        occurrences:
        - 1
        - UNBOUNDED
      disk.device.usage:
        description: A node type that includes the Metric capability indicates that it can be monitored using ceilometer.
        type: org.openecomp.capabilities.metric.Ceilometer
        occurrences:
        - 1
        - UNBOUNDED
      disk.device.read.requests.rate:
        description: A node type that includes the Metric capability indicates that it can be monitored using ceilometer.
        type: org.openecomp.capabilities.metric.Ceilometer
        occurrences:
        - 1
        - UNBOUNDED
      disk.device.write.requests.rate:
        description: A node type that includes the Metric capability indicates that it can be monitored using ceilometer.
        type: org.openecomp.capabilities.metric.Ceilometer
        occurrences:
        - 1
        - UNBOUNDED
      disk.allocation:
        description: A node type that includes the Metric capability indicates that it can be monitored using ceilometer.
        type: org.openecomp.capabilities.metric.Ceilometer
        occurrences:
        - 1
        - UNBOUNDED
      disk.read.bytes.rate:
        description: A node type that includes the Metric capability indicates that it can be monitored using ceilometer.
        type: org.openecomp.capabilities.metric.Ceilometer
        occurrences:
        - 1
        - UNBOUNDED
      disk.read.bytes:
        description: A node type that includes the Metric capability indicates that it can be monitored using ceilometer.
        type: org.openecomp.capabilities.metric.Ceilometer
        occurrences:
        - 1
        - UNBOUNDED
      memory.usage:
        description: A node type that includes the Metric capability indicates that it can be monitored using ceilometer.
        type: org.openecomp.capabilities.metric.Ceilometer
        occurrences:
        - 1
        - UNBOUNDED
      disk.device.capacity:
        description: A node type that includes the Metric capability indicates that it can be monitored using ceilometer.
        type: org.openecomp.capabilities.metric.Ceilometer
        occurrences:
        - 1
        - UNBOUNDED
      memory.resident:
        description: A node type that includes the Metric capability indicates that it can be monitored using ceilometer.
        type: org.openecomp.capabilities.metric.Ceilometer
        occurrences:
        - 1
        - UNBOUNDED
      disk.write.requests:
        description: A node type that includes the Metric capability indicates that it can be monitored using ceilometer.
        type: org.openecomp.capabilities.metric.Ceilometer
        occurrences:
        - 1
        - UNBOUNDED

  org.openecomp.resource.abstract.nodes.DFAbstractSubstitute:
    derived_from: org.openecomp.resource.abstract.nodes.AbstractSubstitute
    properties:
      license_feature_group_ref:
        description: refrence to license feature group
        type: string
        status: supported
        required: true
    requirements:
    - deployment_flavor:
        capability: org.openecomp.capabilities.attachment.DeploymentFlavor
        node: org.openecomp.resource.nodes.DeploymentFlavor
        relationship: org.openecomp.relationships.AttachesTo
        occurrences:
        - 1
        - UNBOUNDED

  org.openecomp.resource.abstract.nodes.ComplexVFC:
    derived_from: org.openecomp.resource.abstract.nodes.AbstractSubstitute

  org.openecomp.resource.abstract.nodes.VFC:
    derived_from: org.openecomp.resource.abstract.nodes.AbstractSubstitute
    properties:
      high_availablity:
        description: high_availablity
        type: string
        status: supported
        required: false
      vm_image_name:
        description: Master image_name volume id
        type: string
        status: supported
        required: true
      vm_flavor_name:
        description: Master image_name volume id
        type: string
        status: supported
        required: true
      nfc_naming_code:
        description: nfc code for instance naming
        type: string
        status: supported
        required: false
      nfc_code:
        type: string
        description: nfc code
        status: supported
        required: false
      nfc_function:
        type: string
        description: nfc function
        status: supported
        required: false
      vm_type_tag:
        description: vm type based on naming Convention
        type: string
        status: supported
        required: false
      vfc_naming:
        description: vfc naming
        type: org.openecomp.datatypes.Naming
        status: supported
        default: false
        required: false
      min_instances:
        description: Minimum number of VFC Instances
        type: integer
        status: supported
        default: 0
        required: false
        constraints:
        - greater_or_equal: 0
      max_instances:
        description: Maximum number of VFC Instances
        type: integer
        status: supported
        required: false
        constraints:
        - greater_or_equal: 1

  org.openecomp.resource.vl.ELine:
    derived_from: org.openecomp.resource.vl.nodes.network.Network
    capabilities:
      linkable:
        type: tosca.capabilities.network.Linkable
        occurrences:
        - 0
        - 2

  org.openecomp.resource.cp.nodes.network.v2.SubInterface:
    derived_from: tosca.nodes.Root
    properties:
      ip_address:
        description: Allow the user to set a fixed IP address. Note that this address is a request to the provider which they will attempt to fulfill but may not be able to dependent on the network the port is associated with.
        type: string
        required: false
      order:
        description: 'The order of the NIC on the compute instance (e.g. eth2). Note:
          when binding more than one port to a single compute (aka multi vNICs) and
          ordering is desired, it is *mandatory* that all ports will be set with an
          order value and. The order values must represent a positive, arithmetic
          progression that starts with 0 (e.g. 0, 1, 2, ..., n).'
        type: integer
        default: 0
        required: false
        constraints:
        - greater_or_equal: 0
      is_default:
        description: Set is_default=true to apply a default gateway route on the running compute instance to the associated network gateway. Only one port that is associated to single compute node can set as default=true.
        type: boolean
        default: false
        required: false
      ip_range_start:
        description: Defines the starting IP of a range to be allocated for the compute instances that are associated by this Port. Without setting this property the IP allocation is done from the entire CIDR block of the network.
        type: string
        required: false
      ip_range_end:
        description: Defines the ending IP of a range to be allocated for the compute instances that are associated by this Port. Without setting this property the IP allocation is done from the entire CIDR block of the network.
        type: string
        required: false
    attributes:
      ip_address:
        description: The IP address would be assigned to the associated compute instance.
        type: string
    requirements:
    - subinterface_link:
        capability: tosca.capabilities.network.Linkable
        relationship: tosca.relationships.network.LinksTo
    - binding:
        capability: tosca.capabilities.network.Bindable
        relationship: tosca.relationships.network.BindsTo

  org.openecomp.resource.cp.nodes.network.SubInterface:
    derived_from: tosca.nodes.network.Port

  org.openecomp.resource.vl.internalVL:
    derived_from: org.openecomp.resource.vl.nodes.network.Network
    description: The AT&T internal (VF-level) Virtual Link

  org.openecomp.resource.cp.nodes.network.Port:
    derived_from: tosca.nodes.network.Port  
    properties:
      subinterface_indicator:
        description: identifies if Port is having Sub Interface
        type: boolean
        required: false
        default: false
      network_role_tag:
        description: Must correlate to the set of defined “network-role�? tag identifiers from the associated HEAT template
        type: string
        required: true
      mac_requirements:
        description: identifies MAC address assignments to the CP
        type: org.openecomp.datatypes.network.MacRequirements
        required: false
      vlan_requirements:
        description: identifies vlan address assignments to the CP
        type: list
        entry_schema:
          type: org.openecomp.datatypes.network.VlanRequirements
        required: false
      ip_requirements:
        description: identifies IP requirements to the CP
        type: list
        entry_schema:
          type: org.openecomp.datatypes.network.IpRequirements
        required: true
      network_role:
        description: identical to VL network_role
        type: string
        required: false
      order:
        description: The order of the CP on the compute instance (e.g. eth2).
        type: integer
        required: false
      exCP_naming:
        description: CP Name
        type: org.openecomp.datatypes.Naming
        required: false
      subnetpoolid:
        description: subnet pool id
        type: string
        required: false
      related_networks:
        type: list
        description: Related Networks List.
        required: false
        entry_schema:
          type: org.openecomp.datatypes.network.RelatedNetworksAssignments
    capabilities:
      network.incoming.packets.rate:
        description: A node type that includes the Metric capability indicates that it can be monitored using ceilometer.
        type: org.openecomp.capabilities.metric.Ceilometer
        occurrences:
        - 1
        - UNBOUNDED
      network.outgoing.bytes:
        description: A node type that includes the Metric capability indicates that it can be monitored using ceilometer.
        type: org.openecomp.capabilities.metric.Ceilometer
        occurrences:
        - 1
        - UNBOUNDED
      network.outgoing.packets.rate:
        description: A node type that includes the Metric capability indicates that it can be monitored using ceilometer.
        type: org.openecomp.capabilities.metric.Ceilometer
        occurrences:
        - 1
        - UNBOUNDED
      network.outpoing.packets:
        description: A node type that includes the Metric capability indicates that it can be monitored using ceilometer.
        type: org.openecomp.capabilities.metric.Ceilometer
        occurrences:
        - 1
        - UNBOUNDED
      network.incoming.bytes.rate:
        description: A node type that includes the Metric capability indicates that it can be monitored using ceilometer.
        type: org.openecomp.capabilities.metric.Ceilometer
        occurrences:
        - 1
        - UNBOUNDED
      network.incoming.bytes:
        description: A node type that includes the Metric capability indicates that it can be monitored using ceilometer.
        type: org.openecomp.capabilities.metric.Ceilometer
        occurrences:
        - 1
        - UNBOUNDED
      network.outgoing.bytes.rate:
        description: A node type that includes the Metric capability indicates that it can be monitored using ceilometer.
        type: org.openecomp.capabilities.metric.Ceilometer
        occurrences:
        - 1
        - UNBOUNDED
      network.incoming.packets:
        description: A node type that includes the Metric capability indicates that it can be monitored using ceilometer.
        type: org.openecomp.capabilities.metric.Ceilometer
        occurrences:
        - 1
        - UNBOUNDED

  org.openecomp.resource.nodes.DeploymentFlavor:
    derived_from: tosca.nodes.Root
    capabilities:
      deployment_flavor:
        description: Allowed deployment flavors of an abstract node
        type: org.openecomp.capabilities.attachment.DeploymentFlavor
        occurrences:
        - 1
        - UNBOUNDED

  org.openecomp.resource.cp.extCP:
    derived_from: tosca.nodes.Root
    description: The AT&T Connection Point base type all other CP derive from
    properties:
      network_role:
        description: identical to VL network_role
        type: string
        required: true
      order:
        description: The order of the CP on the compute instance (e.g. eth2).
        type: integer
        required: true
      network_role_tag:
        description: Must correlate to the set of defined “network-role�? tag identifiers from the associated HEAT template
        type: string
        required: true
      mac_requirements:
        description: identifies MAC address assignments to the CP
        type: org.openecomp.datatypes.network.MacRequirements
        required: false
      vlan_requirements:
        description: identifies vlan address assignments to the CP
        type: list
        entry_schema:
          type: org.openecomp.datatypes.network.VlanRequirements
        required: false
      ip_requirements:
        description: identifies IP requirements to the CP
        type: list
        entry_schema:
          type: org.openecomp.datatypes.network.IpRequirements
        required: true
    capabilities:
      internal_connectionPoint:
        type: tosca.capabilities.Node
        valid_source_types:
        - tosca.nodes.network.Port
    requirements:
    - virtualLink:
        capability: tosca.capabilities.network.Linkable
        relationship: tosca.relationships.network.LinksTo
    - virtualBinding:
        capability: tosca.capabilities.network.Bindable
        relationship: tosca.relationships.network.BindsTo
    - external_virtualLink:
        capability: tosca.capabilities.network.Linkable
        node: org.openecomp.resource.vl.nodes.network.Network
        relationship: tosca.relationships.network.LinksTo

  org.openecomp.resource.vfc.nodes.volume:
    derived_from: tosca.nodes.BlockStorage
    
  ### Node types related to Deployment Flavors
  org.openecomp.resource.abstract.nodes.VnfConfiguration:
    derived_from: tosca.nodes.Root
    description: a container for the available flavors
    properties:
      allowed_flavors:
        description: a collection of all available flavor valuesets
        type: map
        entry_schema:
          type: org.openecomp.datatypes.flavors.DeploymentFlavor

  org.openecomp.resource.abstract.nodes.MultiFlavorVFC:
    derived_from: org.openecomp.resource.abstract.nodes.VFC
    description: Multi flavored VFC node
    properties:
      images:
        type: map
        entry_schema:
          type: org.openecomp.datatypes.ImageInfo
        required: false

  ## New node types for Port Mirroring
  org.openecomp.nodes.ServiceProxy:
    derived_from: tosca.nodes.Root

  org.openecomp.nodes.PortMirroringConfiguration:
    derived_from: tosca.nodes.Root
    requirements:
    - source:
        capability: org.openecomp.capabilities.PortMirroring
        occurrences:
        - 1
        - UNBOUNDED
    - collector:
        capability: org.openecomp.capabilities.PortMirroring
        occurrences:
        - 1
        - 1

  org.openecomp.resource.cp.v2.extCP:
    derived_from: org.openecomp.resource.cp.nodes.network.Port
    description: The SDC External Connection Point base type
    capabilities:
      port_mirroring:
        type: org.openecomp.capabilities.PortMirroring

  org.openecomp.resource.cp.v2.extNeutronCP:
    derived_from: org.openecomp.resource.cp.v2.extCP
    properties:
      port_security_enabled:
        type: boolean
        description: Flag to enable/disable port security on the network
        required: false
        status: supported
      device_id:
        type: string
        description: Device ID of this port
        required: false
        status: supported
      qos_policy:
        type: string
        description: The name or ID of QoS policy to attach to this network
        required: false
        status: supported
      allowed_address_pairs:
        type: list
        description: Additional MAC/IP address pairs allowed to pass through the port
        required: false
        status: supported
        entry_schema:
          type: org.openecomp.datatypes.heat.network.AddressPair
      binding:vnic_type:
        type: string
        description: The vnic type to be bound on the neutron port
        required: false
        status: supported
        constraints:
        - valid_values:
          - macvtap
          - direct
          - normal
      value_specs:
        type: map
        description: Extra parameters to include in the request
        required: false
        default: {
          }
        status: supported
        entry_schema:
          type: string
      device_owner:
        type: string
        description: Name of the network owning the port
        required: false
        status: supported
      network:
        type: string
        description: Network this port belongs to
        required: false
        status: supported
      replacement_policy:
        type: string
        description: Policy on how to respond to a stack-update for this resource
        required: false
        default: AUTO
        status: supported
        constraints:
        - valid_values:
          - REPLACE_ALWAYS
          - AUTO
      security_groups:
        type: list
        description: List of security group names or IDs
        required: false
        status: supported
        entry_schema:
          type: string
      fixed_ips:
        type: list
        description: Desired IPs for this port
        required: false
        status: supported
        entry_schema:
          type: org.openecomp.datatypes.heat.neutron.port.FixedIps
      mac_address:
        type: string
        description: MAC address to give to this port
        required: false
        status: supported
      admin_state_up:
        type: boolean
        description: A boolean value specifying the administrative status of the network
        required: false
        default: true
        status: supported
      name:
        type: string
        description: A symbolic name for this port
        required: false
        status: supported
    attributes:
      tenant_id:
        type: string
        description: Tenant owning the port
        status: supported
      network_id:
        type: string
        description: Unique identifier for the network owning the port
        status: supported
      qos_policy_id:
        type: string
        description: The QoS policy ID attached to this network
        status: supported
      show:
        type: string
        description: Detailed information about resource
        status: supported
      subnets:
        type: list
        description: Subnets of this network
        status: supported
        entry_schema:
          type: string
      status:
        type: string
        description: The status of the network
        status: supported
    capabilities:
      attachment:
        type: tosca.capabilities.Attachment
        occurrences:
        - 1
        - UNBOUNDED
      binding:
        type: tosca.capabilities.network.Bindable
        valid_source_types:
        - org.openecomp.resource.cp.nodes.heat.network.contrailV2.VLANSubInterface
        - org.openecomp.resource.cp.nodes.heat.network.v2.contrailV2.VLANSubInterface
        occurrences:
        - 0
        - UNBOUNDED

  org.openecomp.resource.cp.v2.extContrailCP:
    derived_from: org.openecomp.resource.cp.v2.extCP
    properties:
      static_routes:
        type: list
        description: An ordered list of static routes to be added to this interface
        required: false
        status: supported
        entry_schema:
          type: org.openecomp.datatypes.heat.network.contrail.port.StaticRoute
      virtual_network:
        type: string
        description: Virtual Network for this interface
        required: true
        status: supported
      static_route:
        type: boolean
        description: Static route enabled
        required: false
        default: false
        status: supported
      allowed_address_pairs:
        type: list
        description: List of allowed address pair for this interface
        required: false
        status: supported
        entry_schema:
          type: org.openecomp.datatypes.heat.network.contrail.AddressPair
      shared_ip:
        type: boolean
        description: Shared ip enabled
        required: false
        default: false
        status: supported
      ip_address:
        type: string
        description: IP for this interface
        required: false
        status: supported
      interface_type:
        type: string
        description: Interface type
        required: true
        status: supported
        constraints:
        - valid_values:
          - management
          - left
          - right
          - other
    attributes:
      fq_name:
        type: string
        description: fq_name
        status: supported

  org.openecomp.resource.cp.v2.extVirtualMachineInterfaceCP:
    derived_from: org.openecomp.resource.cp.v2.extCP
    properties:
      name:
        description: Virtual Machine Interface name
        type: string
        status: supported
        required: false
      security_group_refs:
        description: List of security groups.
        type: list
        status: supported
        entry_schema:
          type: string
        required: false
      virtual_network_refs:
        description: List of virtual networks.
        type: list
        status: supported
        entry_schema:
          type: string
        required: false
      virtual_machine_interface_properties:
        description: virtual machine interface properties.
        type: org.openecomp.datatypes.heat.contrailV2.virtual.machine.interface.Properties
        status: supported
        required: false
      port_tuple_refs:
        description: List of port tuples.
        type: list
        status: supported
        entry_schema:
          type: string
        required: false
      virtual_machine_interface_mac_addresses:
        description: List of mac addresses.
        type: list
        status: supported
        entry_schema:
          type: string
        required: false
      virtual_machine_interface_allowed_address_pairs:
        description: Virtual Machine Interface allowed address pairs.
        type: org.openecomp.datatypes.heat.contrailV2.virtual.machine.subInterface.AddressPairs
        status: supported
        required: false
    attributes:
      fq_name:
        description: The FQ name of the Virtual Network.
        type: string
        status: supported
      show:
        description: All attributes.
        type: string
        status: supported
    capabilities:
      binding:
        type: tosca.capabilities.network.Bindable
        occurrences:
        - 0
        - UNBOUNDED
        valid_source_types:
        - org.openecomp.resource.cp.nodes.heat.network.contrailV2.VLANSubInterface
        - org.openecomp.resource.cp.nodes.heat.network.v2.contrailV2.VLANSubInterface

  tosca.nodes.nfv.NS.vEPC_NS:
    derived_from: tosca.nodes.nfv.NS
    properties:
      vendor:
        default: ChinaMobile
        required: false
        type: string
      csarVersion:
        default: v1.0
        required: false
        type: string
      name:
        default: vEPC_NS
        required: false
        type: string
      csarProvider:
        default: ChinaMobile
        required: false
        type: string
      id:
        default: vEPC_NS
        required: false
        type: string
      version:
        default: v1.0
        required: false
        type: string
      csarType:
        default: NSAR
        required: false
        type: string
    requirements:
    - virtualLink:
        capability: tosca.capabilities.nfv.VirtualLinkable
        occurrences:
        - 0
        - UNBOUNDED

  tosca.nodes.nfv.NS.vIMS_NS:
    derived_from: tosca.nodes.nfv.NS
    properties:
      vendor:
        default: ChinaMobile
        required: false
        type: string
      csarVersion:
        default: v1.0
        required: false
        type: string
      name:
        default: vIMS_NS
        required: false
        type: string
      csarProvider:
        default: ChinaMobile
        required: false
        type: string
      id:
        default: vIMS_NS
        required: false
        type: string
      version:
        default: v1.0
        required: false
        type: string
      csarType:
        default: NSAR
        required: false
        type: string
    requirements:
    - virtualLink:
        capability: tosca.capabilities.nfv.VirtualLinkable
        occurrences:
        - 0
        - UNBOUNDED

  tosca.nodes.nfv.NS:
    derived_from: tosca.nodes.Root
    properties:
      vendor:
        required: false
        type: string
      name:
        required: false
        type: string
      id:
        required: false
        type: string
      version:
        required: false
        type: string
    requirements:
    - virtualLink:
        capability: tosca.capabilities.nfv.VirtualLinkable
        occurrences:
        - 0
        - UNBOUNDED

  tosca.nodes.nfv.Vdu.Compute:
    #attributes:
    #  private_address:
    #    type: string
    #  public_address:
    #    type: string
    #  networks:
    #    type: string
    #  ports:
    #    type: string
    capabilities:
      #scalable:
      #  type: tosca.capabilities.Scalable
      virtual_compute:
        type: tosca.capabilities.nfv.VirtualCompute
      #endpoint:
      #  type: tosca.capabilities.Endpoint.Admin
      #os:
      #  type: tosca.capabilities.OperatingSystem
      virtual_binding:
        type: tosca.capabilities.nfv.VirtualBindable
        occurrences: [1, UNBOUNDED]
      #host:
      #  type: tosca.capabilities.Container
      #binding:
      #  type: tosca.capabilities.network.Bindable
      monitoring_parameter:
        type: tosca.capabilities.nfv.Metric
        occurrences: [0, UNBOUNDED]
    derived_from: tosca.nodes.Root
    properties:
      vdu_profile:
        type: tosca.datatypes.nfv.VduProfile
        required: true
      inject_files: # Used for vCPE usecase Aligned with ONAP R2 IM. not defined in IFA011 v2.4.1 and SOL001 v0.6.0.
        type: tosca.datatypes.nfv.injectFile
        required: false
      meta_data: #metadata attached to the VM or container
        type: map
        entry_schema:
          type: string
        required: false
      user_data: #cloudinit userdata script support
        type: string
        required: false
      configurable_properties:
        entry_schema:
          type: tosca.datatypes.nfv.VnfcConfigurableProperties
        type: map
        required: true
      name:
        type: string
        required: true
      nfvi_constraints:
        entry_schema:
          type: string
        required: false
        type: list
      descrption:
        type: string
        required: true
      boot_order:
        entry_schema:
          type: string
        required: false
        type: list
    requirements:
    #- local_storage:
    #    capability: tosca.capabilities.Attachment
    #    occurrences:
    #    - 0
    #    - UNBOUNDED
      - virtual_storage:
          capability: tosca.capabilities.nfv.VirtualStorage
          relationship: tosca.relationships.nfv.Vdu.AttachedTo
          node: tosca.nodes.nfv.VDU.VirtualStorage
          occurences: [ 0, UNBOUNDED ]

  tosca.nodes.nfv.Vdu.VirtualStorage:
    capabilities:
      virtual_storage:
        type: tosca.capabilities.nfv.VirtualStorage
    derived_from: tosca.nodes.Root
    properties:
      #id:
      #  type: string
      size_of_storage:
        type: scalar-unit.size
        required: true
      vdu_storage_requirements:
        type: map
        entry_schema:
          type: string
        required: false
      rdma_enabled:
        required: false
        type: boolean
      type_of_storage:
        type: string
        constraints:
          - valid_values: [volume, object, root, block]
        required: true

  tosca.nodes.nfv.Cp:
    derived_from: tosca.nodes.Root
    properties:
      layer_protocol:
        type: list
        entry_schema:
          constraints:
            - valid_values: [ethernet, mpls, odu2, ipv4, ipv6, pseudo_wire ]
          type: string
        required: true
      role: #Name in ETSI NFV IFA011 v0.7.3 cpRole
        type: string
        constraints:
          - valid_values: [ root, leaf ]
        required: false
      description:
        type: string
        required: false
      protocol_data:
        type: list
        entry_schema:
          type: tosca.datatypes.nfv.CpProtocolData
        required: true
      trunk_mode:
        type: boolean
        required: true
      allowedAddressData: # Aligned with ONAP R2 Im.not defined in IFA011 v2.4.1 and SOL001 v0.6.0
        type: tosca.datatypes.nfv.AddressData
        required: false

  tosca.nodes.nfv.VduCpd:
    derived_from: tosca.nodes.Root
    properties:
      virtual_network_interface_requirements:
        entry_schema:
          type: tosca.datatypes.nfv.VirtualNetworkInterfaceRequirements
        required: false
        type: list
      #role:
      #  constraints:
      #  - valid_values:
      #    - root
      #    - leaf
      #  required: false
      #  type: string
      bitrate_requirement:
        required: false
        type: integer
      #description:
      #  required: false
      #  type: string
      #layer_protocol:
      #  constraints:
      #  - valid_values:
      #    - ethernet
      #    - mpls
      #    - odu2
      #    - ipv4
      #    - ipv6
      #    - pseudo_wire
      #  type: string
      #address_data:
      #  entry_schema:
      #    type: tosca.datatype.nfv.AddressData
      #  required: false
      #  type: list
      vnic_name: #  Aligned with ONAP R2 Im.not defined in IFA011 v2.4.1 and SOL001 v0.6.0
        type: string
        required: false
      vnic_order: # Aligned with ONAP R2 Im. not defined in IFA011 v2.4.1 and SOL001 v0.6.0
        type: integer
        required: false
      vnic_type: # Aligned with ONAP R2 Im. not defined in IFA011 v2.4.1 and SOL001 v0.6.0
        type: string
        constraints:
          - valid_values: [normal, macvtap, direct, baremetal, direct-physical, virtio-forwarder]
        required: false
    requirements:
      - virtual_binding:
          capability: tosca.capabilities.nfv.VirtualBindable
          relationship: tosca.relationships.nfv.VirtualBindsTo
          node: tosca.nodes.nfv.Vdu.Compute
      - virtual_link:
          capability: tosca.capabilities.nfv.VirtualLinkable
          relationship: tosca.relationships.nfv.VirtualLinksTo
          node: tosca.nodes.nfv.VnfVirtualLink

  tosca.nodes.nfv.VnfVirtualLink:
    derived_from: tosca.nodes.Root
    properties:
      connectivity_type:
        type: tosca.datatypes.nfv.ConnectivityType
        required: true
      description:
        type: string
        required: false
      test_access:
        type: list
        entry_schema:
          type: string
        required: false
      vl_profile:
        type: tosca.datatypes.nfv.VlProfile
        required: true
    capabilities:
      monitoring_parameter:
        type: tosca.capabilities.nfv.Metric
        occurrences: [0, UNBOUNDED]
      virtual_linkable:
        type: tosca.capabilities.nfv.VirtualLinkable

  tosca.nodes.nfv.VNF:
    derived_from: tosca.nodes.Root
    properties:
      descriptor_id: # instead of vnfd_id
        type: string # GUID
        required: true
      descriptor_version: # instead of vnfd_version
        type: string
        required: true
      provider: # instead of vnf_provider
        type: string
        required: true
      product_name: # instead of vnf_product_name
        type: string
        required: true
      software_version: # instead of vnf_software_version
        type: string
        required: true
      product_info_name: # instead of vnf_product_info_name
        type: string
        required: false
      product_info_description: # instead of vnf_product_info_description
        type: string
        required: false
      vnfm_info:
        type: list
        entry_schema:
          type: string
        required: true
      localization_languages:
        type: list
        entry_schema:
          type: string
        required: false
      default_localization_language:
        type: string
        required: false
      configurable_properties:
        type: tosca.datatypes.nfv.VnfConfigurableProperties
        required: false
      modifiable_attributes:
        type: tosca.datatypes.nfv.VnfInfoModifiableAttributes
        required: false  # true in IFA011, but all of members are false
      flavour_id:
        type: string
        required: true
      flavour_description:
        type: string
        required: true
    #capabilities:
      # monitoring_parameter:
        # modelled as ad hoc capabilities in the VNF node template
    requirements:
      - virtual_link:
          capability: tosca.capabilities.nfv.VirtualLinkable
          relationship: tosca.relationships.nfv.VirtualLinksTo
          node: tosca.nodes.nfv.VnfVirtualLink
          occurrences: [ 0, UNBOUNDED ]
    interfaces:
      Nfv:
        type: tosca.interfaces.nfv.vnf.lifecycle.Nfv
  tosca.nodes.nfv.ext.ImageFile:
    capabilities:
      guest_os:
        type: tosca.capabilities.nfv.ext.GuestOs
      image_fle:
        type: tosca.capabilities.nfv.ext.ImageFile
    derived_from: tosca.nodes.Root
    properties:
      file_url:
        required: false
        type: string
      container_type:
        required: false
        type: string
      name:
        required: false
        type: string
      disk_format:
        required: false
        type: string
      version:
        required: false
        type: string
  tosca.nodes.nfv.ext.LocalStorage:
    capabilities:
      local_attachment:
        type: tosca.capabilities.nfv.ext.LocalAttachment
    derived_from: tosca.nodes.Root
    properties:
      size:
        required: false
        type: string
      disk_type:
        required: false
        type: string
  tosca.nodes.nfv.ext.zte.CP:
    capabilities:
      forwarder:
        type: tosca.capabilities.nfv.Forwarder
    derived_from: tosca.nodes.Root
    properties:
      guest_os_mtu:
        required: false
        type: integer
      bandwidth:
        required: false
        type: integer
      interface_name:
        required: false
        type: string
      allowed_address_pairs:
        entry_schema:
          type: tosca.datatypes.nfv.ext.AddressPairs
        required: false
        type: list
      ip_address:
        required: false
        type: string
      bond:
        required: false
        type: string
      proxiedVNFs:
        entry_schema:
          type: string
        required: false
        type: list
      sfc_encapsulation:
        required: false
        type: string
      floating_ip_address:
        required: false
        type: tosca.datatypes.nfv.ext.FloatingIP
      service_ip_address:
        required: false
        type: string
      mac_address:
        required: false
        type: string
      proxiedVNFtype:
        required: false
        type: string
      macbond:
        required: false
        type: string
      vnic_type:
        required: false
        type: string
      direction:
        required: false
        type: string
      order:
        required: false
        type: integer
    requirements:
    - forwarder:
        capability: tosca.capabilities.nfv.Forwarder
        occurrences:
        - 0
        - UNBOUNDED
    - virtualbinding:
        capability: tosca.capabilities.nfv.VirtualBindable
        occurrences:
        - 0
        - UNBOUNDED
    - virtualLink:
        capability: tosca.capabilities.nfv.VirtualBindable
        occurrences:
        - 0
        - UNBOUNDED
  tosca.nodes.nfv.ext.zte.VDU:
    capabilities:
      scalable:
        type: tosca.capabilities.Scalable
      monitoring_parameter:
        type: tosca.capabilities.nfv.Metric
      nfv_compute:
        type: tosca.capabilities.nfv.ext.Compute.Container.Architecture
      virtualbinding:
        type: tosca.capabilities.nfv.VirtualBindable
    derived_from: tosca.nodes.Root
    properties:
      manual_scale_select_vim:
        required: false
        type: boolean
      vdu_type:
        required: false
        type: string
      watchdog:
        required: false
        type: tosca.datatypes.nfv.ext.zte.WatchDog
      name:
        required: false
        type: string
      local_affinity_antiaffinity_rule:
        required: false
        type: tosca.datatypes.nfv.ext.LocalAffinityOrAntiAffinityRule
      support_scaling:
        required: false
        type: boolean
      storage_policy:
        required: false
        type: string
      key_vdu:
        required: false
        type: boolean
      location_info:
        required: false
        type: tosca.datatypes.nfv.ext.LocationInfo
      inject_data_list:
        entry_schema:
          type: tosca.datatypes.nfv.ext.InjectData
        required: false
        type: list
    requirements:
    - guest_os:
        capability: tosca.capabilities.nfv.ext.GuestOs
        occurrences:
        - 0
        - UNBOUNDED
    - local_storage:
        capability: tosca.capabilities.nfv.ext.LocalAttachment
        occurrences:
        - 0
        - UNBOUNDED
    - volume_storage:
        capability: tosca.capabilities.Attachment
        occurrences:
        - 0
        - UNBOUNDED
    - dependency:
        capability: tosca.capabilities.Node
        occurrences:
        - 0
        - UNBOUNDED
  tosca.nodes.nfv.ext.zte.VL:
    capabilities:
      virtual_linkable:
        type: tosca.capabilities.nfv.VirtualLinkable
    derived_from: tosca.nodes.Root
    properties:
      segmentation_id:
        required: false
        type: string
      network_name:
        required: false
        type: string
      is_predefined:
        required: false
        type: boolean
      mtu:
        required: false
        type: integer
      dns_nameservers:
        entry_schema:
          type: string
        required: false
        type: list
      physical_network:
        required: false
        type: string
      dhcp_enabled:
        required: false
        type: boolean
      network_id:
        required: false
        type: string
      host_routes:
        entry_schema:
          type: tosca.datatypes.nfv.ext.HostRouteInfo
        required: false
        type: list
      ip_version:
        required: false
        type: integer
      vendor:
        required: false
        type: string
      name:
        required: false
        type: string
      start_ip:
        required: false
        type: string
      vlan_transparent:
        required: false
        type: boolean
      cidr:
        required: false
        type: string
      gateway_ip:
        required: false
        type: string
      network_type:
        required: false
        type: string
      end_ip:
        required: false
        type: string
      location_info:
        required: false
        type: tosca.datatypes.nfv.ext.LocationInfo
  tosca.nodes.nfv.ext.zte.VNF:
    capabilities:
      forwarder:
        type: tosca.capabilities.nfv.Forwarder
    derived_from: tosca.nodes.Root
    properties:
      request_reclassification:
        required: false
        type: boolean
      domain_type:
        required: false
        type: string
      nsh_aware:
        required: false
        type: boolean
      plugin_info:
        required: false
        type: string
      adjust_vnf_capacity:
        required: false
        type: boolean
      vnfd_version:
        required: false
        type: string
      vmnumber_overquota_alarm:
        required: false
        type: boolean
      custom_properties:
        entry_schema:
          type: string
        required: false
        type: map
      version:
        required: false
        type: string
      cross_dc:
        required: false
        type: boolean
      script_info:
        required: false
        type: string
      vendor:
        required: false
        type: string
      is_shared:
        required: false
        type: boolean
      name:
        required: false
        type: string
      vnf_extend_type:
        required: false
        type: string
      id:
        required: false
        type: string
      vnf_type:
        required: false
        type: string
      is_sfc_proxy:
        required: false
        type: boolean
    requirements:
    - forwarder:
        capability: tosca.capabilities.nfv.Forwarder
        occurrences:
        - 0
        - UNBOUNDED
    - virtualLink:
        capability: tosca.capabilities.nfv.VirtualLinkable
        occurrences:
        - 0
        - UNBOUNDED

  tosca.nodes.nfv.VnfVirtualLinkDesc:
    capabilities:
      monitoring_parameters:
        type: tosca.capabilities.nfv.Metric
      virtual_linkable:
        type: tosca.capabilities.nfv.VirtualLinkable
    derived_from: tosca.nodes.Root
    properties:
      vl_flavours:
        entry_schema:
          type: string
        type: map
      description:
        required: false
        type: string
      test_access:
        entry_schema:
          type: string
        required: false
        type: list
      connectivity_type:
        type: tosca.datatypes.nfv.ConnectivityType
