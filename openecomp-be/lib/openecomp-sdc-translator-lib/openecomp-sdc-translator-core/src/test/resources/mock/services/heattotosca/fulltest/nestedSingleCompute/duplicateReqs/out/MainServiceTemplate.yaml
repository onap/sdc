tosca_definitions_version: tosca_simple_yaml_1_0_0
metadata:
  template_name: Main
imports:
- openecomp_heat_index:
    file: openecomp-heat/_index.yml
- GlobalSubstitutionTypes:
    file: GlobalSubstitutionTypesServiceTemplate.yaml
topology_template:
  inputs:
    cif_internal_ip_0:
      hidden: false
      immutable: false
      type: string
      description: Internal IP of CIF01 instance
      default: 192.168.210.1
    vcscf_release:
      hidden: false
      immutable: false
      type: string
      description: IMS release
      default: '17.0'
    cif_name_1:
      hidden: false
      immutable: false
      type: string
      description: CIF02 instance name
    cif_name_0:
      hidden: false
      immutable: false
      type: string
      description: CIF01 instance name
    cif_internal_ip_1:
      hidden: false
      immutable: false
      type: string
      description: Internal IP of CIF02 instance
      default: 192.168.210.2
    tdcore_zone_0_count:
      hidden: false
      immutable: false
      type: float
      description: |
        Number of TD Core VMs to be deployed zone 0. This parameter is used to scale the TD Core instances.
      default: 4
      constraints:
      - in_range:
        - 0
        - 8
    lbd_internal_dpdk_vip_0:
      hidden: false
      immutable: false
      type: string
      description: Internal DPDK CIP IP of LBD
      default: 192.168.211.181
    lbd_ims_core_v6_vip_0:
      hidden: false
      immutable: false
      type: string
      description: IMS CORE CIPA v6 IP of LBD
    cscf_zone_1_count:
      hidden: false
      immutable: false
      type: float
      description: |
        Number of CSCF to be deployed on zone 1. This parameter is used to scale the cscf instances.
      default: 18
      constraints:
      - in_range:
        - 0
        - 120
    oam_internal_vip_0:
      hidden: false
      immutable: false
      type: string
      description: Internal CIPA IP of OAM unit
      default: 192.168.210.3
    cscf_image_name:
      hidden: false
      immutable: false
      type: string
      description: CSCF server VM image name
      default: IMS_17_0_OPENSTACK_CSCF_1701400.000
    cif_internal_vip_0:
      hidden: false
      immutable: false
      type: string
      description: Internal CIPA IP of CIF
      default: 192.168.210.150
    cif_ims_core_v6_ip_0:
      hidden: false
      immutable: false
      type: string
      description: IMS CORE v6 IP of CIF01 instance
    cif_ims_core_v6_ip_1:
      hidden: false
      immutable: false
      type: string
      description: IMS CORE v6 IP of CIF02 instance
    oam_volume_id_1:
      hidden: false
      immutable: false
      type: string
      description: size of the cinder volume used for oam
    oam_volume_size_0:
      hidden: false
      immutable: false
      type: float
      description: Size of Volume for oam VMs
      default: 300
      constraints:
      - in_range:
        - 1
        - 300
    oam_volume_id_0:
      hidden: false
      immutable: false
      type: string
      description: size of the cinder volume used for oam
    vcscf_oam_netmask:
      hidden: false
      immutable: false
      type: string
      description: Netmask for OAM LAN
    tdcore_zone_1_names:
      hidden: false
      immutable: false
      type: list
      description: List of instance names for TDCORE instances on zone 1
      entry_schema:
        type: string
    cif_flavor_name:
      hidden: false
      immutable: false
      type: string
      description: CSCF CIF VM flavor
      default: ND.c4r16d38
    vcscf_dns_address:
      hidden: false
      immutable: false
      type: string
      description: DNS server IP
    vcscf_internal_network_cidr:
      hidden: false
      immutable: false
      type: string
      description: CIDR for for Internal LAN
      default: 192.168.210.0/24
    cdi_ims_core_v6_ip_1:
      hidden: false
      immutable: false
      type: string
      description: IMS CORE LAN v6 IP of CDI02 instance
    cdi_ims_core_v6_ip_0:
      hidden: false
      immutable: false
      type: string
      description: IMS CORE LAN v6 IP of CDI01 instance
    cdi_flavor_name:
      hidden: false
      immutable: false
      type: string
      description: CDI VM flavor
      default: ND.c4r8d38
    vcscf_default_gateway:
      hidden: false
      immutable: false
      type: string
      description: Default gateway for OAM LAN
    tdcore_zone_0_uuids:
      hidden: false
      immutable: false
      type: list
      description: List of UUIDs generated by cmrepo for TDCORE instances on zone 0
      entry_schema:
        type: string
    oam_name_1:
      hidden: false
      immutable: false
      type: string
      description: OAM02 instance name
    oam_name_0:
      hidden: false
      immutable: false
      type: string
      description: OAM01 instance name
    oam_name_2:
      hidden: false
      immutable: false
      type: string
      description: OAM03 instance name
    cscf_zone_1_uuids:
      hidden: false
      immutable: false
      type: list
      description: List of UUIDs generated by cmrepo for CSCF instances on zone 1
      entry_schema:
        type: string
    vf_module_id:
      hidden: false
      immutable: false
      type: string
      description: Unique ID for this VF Module instance
    oam_oam_ip_0:
      hidden: false
      immutable: false
      type: string
      description: OAM IP of OAM01 instance
    cscf_internal_zone_1_ips:
      hidden: false
      immutable: false
      type: list
      description: List of Internal Lan IPs for CSCF instances on zone 1
      default:
      - 192.168.210.17
      - 192.168.210.19
      - 192.168.210.21
      - 192.168.210.23
      - 192.168.210.25
      - 192.168.210.27
      - 192.168.210.29
      - 192.168.210.31
      - 192.168.210.33
      - 192.168.210.35
      - 192.168.210.37
      - 192.168.210.39
      - 192.168.210.41
      - 192.168.210.43
      - 192.168.210.45
      - 192.168.210.47
      - 192.168.210.49
      - 192.168.210.51
      entry_schema:
        type: string
    cif_ims_li_v6_vip_0:
      hidden: false
      immutable: false
      type: string
      description: IMS LI CIPA v6 IP of CIF
    oam_oam_ip_1:
      hidden: false
      immutable: false
      type: string
      description: OAM IP of OAM02 instance
    oam_oam_ip_2:
      hidden: false
      immutable: false
      type: string
      description: OAM IP of OAM03 instance
    vnf_name:
      hidden: false
      immutable: false
      type: string
      description: Unique name for this VF instance
    lbd_flavor_name:
      hidden: false
      immutable: false
      type: string
      description: CSCF LBD VM flavor
      default: ND.c4r16d38
    cscf_zone_0_uuids:
      hidden: false
      immutable: false
      type: list
      description: List of UUIDs generated by cmrepo for CSCF instances on zone 0
      entry_schema:
        type: string
    vf_module_name:
      hidden: false
      immutable: false
      type: string
      description: Unique name for this VF Module instance
    cdi_internal_ip_0:
      hidden: false
      immutable: false
      type: string
      description: Internal IP of CDI01 instance
      default: 192.168.210.139
    cscf_zone_0_names:
      hidden: false
      immutable: false
      type: list
      description: List of instance names for CSCF instances on zone 0
      entry_schema:
        type: string
    oam_oam_vip_0:
      hidden: false
      immutable: false
      type: string
      description: OAM CIPA IP of OAM unit
    vcscf_swrepo_address:
      hidden: false
      immutable: false
      type: string
      description: SWRepo IP or FQDN
    cdi_internal_ip_1:
      hidden: false
      immutable: false
      type: string
      description: Internal IP of CDI02 instance
      default: 192.168.210.140
    cdi_name_1:
      hidden: false
      immutable: false
      type: string
      description: CDI02 instance name
    availability_zone_0:
      hidden: false
      immutable: false
      type: string
      description: Storage availability zone for volume of first vm
    availability_zone_1:
      hidden: false
      immutable: false
      type: string
      description: Storage availability zone for volume of second vm
    tdcore_image_name:
      hidden: false
      immutable: false
      type: string
      description: TDCORE VM image name
      default: IMS_17_0_OPENSTACK_CSCF_1701400.000
    tdcore_flavor_name:
      hidden: false
      immutable: false
      type: string
      description: TDCORE VM flavor
      default: ND.c4r16d38
    cscf_flavor_name:
      hidden: false
      immutable: false
      type: string
      description: CSCF server VM flavor
      default: ND.c8r16d38
    vcscf_cmrepo_address:
      hidden: false
      immutable: false
      type: string
      description: CMRepo IP or FQDN
    cdi_name_0:
      hidden: false
      immutable: false
      type: string
      description: CDI01 instance name
    lbd_ims_core_v6_ip_0:
      hidden: false
      immutable: false
      type: string
      description: IMS CORE v6 IP of LBD01 instance
    lbd_ims_core_v6_ip_1:
      hidden: false
      immutable: false
      type: string
      description: IMS CORE v6 IP of LBD02 instance
    tdcore_internal_zone_1_ips:
      hidden: false
      immutable: false
      type: list
      description: List of Internal Lan IPs for TDCORE instances on zone 1
      default:
      - 192.168.210.9
      - 192.168.210.11
      - 192.168.210.13
      - 192.168.210.15
      entry_schema:
        type: string
    oam_net_id:
      hidden: false
      immutable: false
      type: string
      description: Name/UUID of OAM network
    cdi_internal_v6_vip_0:
      hidden: false
      immutable: false
      type: string
      description: Internal v6 CIPA IP of CDI
      default: 2a00:9a00:a000:1190:0:1:1:2b8d
    tdcore_dpdk_zone_1_ips:
      hidden: false
      immutable: false
      type: list
      description: List of DPDK Lan IPs for TDCORE instances on zone 1
      default:
      - 192.168.211.9
      - 192.168.211.11
      - 192.168.211.13
      - 192.168.211.15
      entry_schema:
        type: string
    oam_internal_ip_0:
      hidden: false
      immutable: false
      type: string
      description: Internal IP of OAM01 instance
      default: 192.168.210.136
    oam_internal_ip_1:
      hidden: false
      immutable: false
      type: string
      description: Internal IP of OAM01 instance
      default: 192.168.210.137
    cscf_zone_0_count:
      hidden: false
      immutable: false
      type: float
      description: |
        Number of CSCF to be deployed on zone 0. This parameter is used to scale the cscf instances.
      default: 19
      constraints:
      - in_range:
        - 0
        - 120
    oam_internal_ip_2:
      hidden: false
      immutable: false
      type: string
      description: Internal IP of OAM01 instance
      default: 192.168.210.138
    cscf_zone_1_names:
      hidden: false
      immutable: false
      type: list
      description: List of instance names for CSCF instances on zone 1
      entry_schema:
        type: string
    tdcore_zone_0_names:
      hidden: false
      immutable: false
      type: list
      description: List of instance names for TDCORE instances on zone 0
      entry_schema:
        type: string
    lbd_uuid_0:
      hidden: false
      immutable: false
      type: string
      description: UUID generated by cmrepo for LBD01
    lbd_uuid_1:
      hidden: false
      immutable: false
      type: string
      description: UUID generated by cmrepo for LBD02
    cdi_internal_v6_ip_1:
      hidden: false
      immutable: false
      type: string
      description: Internal v6 IP of CDI02 instance
      default: 2a00:9a00:a000:1190:0:1:1:2b8c
    cdi_internal_v6_ip_0:
      hidden: false
      immutable: false
      type: string
      description: Internal v6 IP of CDI01 instance
      default: 2a00:9a00:a000:1190:0:1:1:2b8b
    cdi_uuid_1:
      hidden: false
      immutable: false
      type: string
      description: UUID generated by cmrepo for CDI02
    ims_core_net_id:
      hidden: false
      immutable: false
      type: string
      description: Name/UUID of Core network
    cdi_uuid_0:
      hidden: false
      immutable: false
      type: string
      description: UUID generated by cmrepo for CDI01
    vcscf_internal_network_v6_cidr:
      hidden: false
      immutable: false
      type: string
      description: CIDR for for Internal LAN v6
      default: 2a00:9a00:a000:1190:0:1:1:2b00/120
    oam_image_name:
      hidden: false
      immutable: false
      type: string
      description: OAM VM image name
      default: IMS_17_0_OPENSTACK_OAM_1701400.000
    tdcore_zone_1_uuids:
      hidden: false
      immutable: false
      type: list
      description: List of UUIDs generated by cmrepo for TDCORE instances on zone 1
      entry_schema:
        type: string
    vcscf_internal_network_mtu:
      hidden: false
      immutable: false
      type: float
      description: MTU for internal network interface (eth0)
      default: 1500
      constraints:
      - in_range:
        - 1000
        - 9100
    vcscf_internal_dpdk_network_cidr:
      hidden: false
      immutable: false
      type: string
      description: CIDR for for Internal LAN DPDK
      default: 192.168.211.0/24
    tdcore_zone_1_count:
      hidden: false
      immutable: false
      type: float
      description: |
        Number of TD Core VMs to be deployed zone 1. This parameter is used to scale the TD Core instances.
      default: 4
      constraints:
      - in_range:
        - 0
        - 8
    cif_volume_size_0:
      hidden: false
      immutable: false
      type: float
      description: Size of Volume for cif VMs
      default: 300
      constraints:
      - in_range:
        - 1
        - 300
    oam_flavor_name:
      hidden: false
      immutable: false
      type: string
      description: OAM VM flavor
      default: ND.c4r32d30
    ims_li_v6_net_id:
      hidden: false
      immutable: false
      type: string
      description: Name/UUID of V6 LI network
    lbd_internal_dpdk_ip_1:
      hidden: false
      immutable: false
      type: string
      description: Internal DPDK IP of LBD02 instance
      default: 192.168.211.2
    cif_ims_core_v6_vip_0:
      hidden: false
      immutable: false
      type: string
      description: IMS CORE v6 CIPA IP of CIF
    lbd_internal_dpdk_ip_0:
      hidden: false
      immutable: false
      type: string
      description: Internal DPDK IP of LBD01 instance
      default: 192.168.211.1
    cdi_image_name:
      hidden: false
      immutable: false
      type: string
      description: CDI VM image name
      default: IMS_17_0_OPENSTACK_CSCF_1701400.000
    oam_uuid_2:
      hidden: false
      immutable: false
      type: string
      description: UUID generated by cmrepo for OAM03
    oam_uuid_1:
      hidden: false
      immutable: false
      type: string
      description: UUID generated by cmrepo for OAM02
    oam_uuid_0:
      hidden: false
      immutable: false
      type: string
      description: UUID generated by cmrepo for OAM01
    cif_oam_vip_0:
      hidden: false
      immutable: false
      type: string
      description: OAM CIPA IP of CIF
    cif_internal_v6_ip_1:
      hidden: false
      immutable: false
      type: string
      description: Internal IP v6 of CIF02 instance
      default: 2a00:9a00:a000:1190:0:1:1:2b05
    vnf_id:
      hidden: false
      immutable: false
      type: string
      description: Unique ID for this VF instance
    cscf_internal_zone_0_v6_ips:
      hidden: false
      immutable: false
      type: list
      description: List of Internal Lan v6 IPs for CSCF instances on zone 0
      default:
      - 2a00:9a00:a000:1190:0:1:1:2b10
      - 2a00:9a00:a000:1190:0:1:1:2b12
      - 2a00:9a00:a000:1190:0:1:1:2b14
      - 2a00:9a00:a000:1190:0:1:1:2b16
      - 2a00:9a00:a000:1190:0:1:1:2b18
      - 2a00:9a00:a000:1190:0:1:1:2b1a
      - 2a00:9a00:a000:1190:0:1:1:2b1c
      - 2a00:9a00:a000:1190:0:1:1:2b1e
      - 2a00:9a00:a000:1190:0:1:1:2b20
      - 2a00:9a00:a000:1190:0:1:1:2b22
      - 2a00:9a00:a000:1190:0:1:1:2b24
      - 2a00:9a00:a000:1190:0:1:1:2b26
      - 2a00:9a00:a000:1190:0:1:1:2b28
      - 2a00:9a00:a000:1190:0:1:1:2b2a
      - 2a00:9a00:a000:1190:0:1:1:2b2c
      - 2a00:9a00:a000:1190:0:1:1:2b2e
      - 2a00:9a00:a000:1190:0:1:1:2b30
      - 2a00:9a00:a000:1190:0:1:1:2b32
      - 2a00:9a00:a000:1190:0:1:1:2b34
      entry_schema:
        type: string
    cscf_internal_zone_1_v6_ips:
      hidden: false
      immutable: false
      type: list
      description: List of Internal Lan v6 IPs for CSCF instances on zone 1
      default:
      - 2a00:9a00:a000:1190:0:1:1:2b11
      - 2a00:9a00:a000:1190:0:1:1:2b13
      - 2a00:9a00:a000:1190:0:1:1:2b15
      - 2a00:9a00:a000:1190:0:1:1:2b17
      - 2a00:9a00:a000:1190:0:1:1:2b19
      - 2a00:9a00:a000:1190:0:1:1:2b1b
      - 2a00:9a00:a000:1190:0:1:1:2b1d
      - 2a00:9a00:a000:1190:0:1:1:2b1f
      - 2a00:9a00:a000:1190:0:1:1:2b21
      - 2a00:9a00:a000:1190:0:1:1:2b23
      - 2a00:9a00:a000:1190:0:1:1:2b25
      - 2a00:9a00:a000:1190:0:1:1:2b27
      - 2a00:9a00:a000:1190:0:1:1:2b29
      - 2a00:9a00:a000:1190:0:1:1:2b2b
      - 2a00:9a00:a000:1190:0:1:1:2b2d
      - 2a00:9a00:a000:1190:0:1:1:2b2f
      - 2a00:9a00:a000:1190:0:1:1:2b31
      - 2a00:9a00:a000:1190:0:1:1:2b33
      entry_schema:
        type: string
    cif_internal_v6_ip_0:
      hidden: false
      immutable: false
      type: string
      description: Internal IP v6 of CIF01 instance
      default: 2a00:9a00:a000:1190:0:1:1:2b04
    lbd_internal_ip_1:
      hidden: false
      immutable: false
      type: string
      description: Internal IP of LBD02 instance
      default: 192.168.210.5
    cif_oam_vip_1:
      hidden: false
      immutable: false
      type: string
      description: OAM (LI-X1) v4 CIPA of CIF
    lbd_internal_ip_0:
      hidden: false
      immutable: false
      type: string
      description: Internal IP of LBD01 instance
      default: 192.168.210.4
    cif_volume_id_0:
      hidden: false
      immutable: false
      type: string
      description: size of the cinder volume used for cif
    cif_ims_li_v6_ip_0:
      hidden: false
      immutable: false
      type: string
      description: IMS LI v6 IP of CIF01 instance
    cif_volume_id_1:
      hidden: false
      immutable: false
      type: string
      description: size of the cinder volume used for cif
    cif_ims_li_v6_ip_1:
      hidden: false
      immutable: false
      type: string
      description: IMS LI v6 IP of CIF02 instance
    lbd_image_name:
      hidden: false
      immutable: false
      type: string
      description: CSCF LBD VM image name
      default: IMS_17_0_OPENSTACK_CSCF_1701400.000
    tdcore_dpdk_zone_0_ips:
      hidden: false
      immutable: false
      type: list
      description: List of DPDK Lan IPs for TDCORE instances on zone 0
      default:
      - 192.168.211.8
      - 192.168.211.10
      - 192.168.211.12
      - 192.168.211.14
      entry_schema:
        type: string
    cif_uuid_0:
      hidden: false
      immutable: false
      type: string
      description: UUID generated by cmrepo for CIF01
    cif_uuid_1:
      hidden: false
      immutable: false
      type: string
      description: UUID generated by cmrepo for CIF02
    cif_oam_ip_0:
      hidden: false
      immutable: false
      type: string
      description: OAM IP of CIF01 instance
    cif_image_name:
      hidden: false
      immutable: false
      type: string
      description: CSCF CIF VM image name
      default: IMS_17_0_OPENSTACK_CSCF_1701400.000
    vcscf_internal_netmask:
      hidden: false
      immutable: false
      type: string
      description: Netmask for Internal LAN
      default: 255.255.255.0
    vcscf_name_delimeter:
      hidden: false
      immutable: false
      type: string
      description: 'delimeter used in concatenating different words while naming (ex:
        "-","_",".",...)'
      default: _
      constraints:
      - valid_values:
        - '-'
        - ''
        - _
        - .
    cif_oam_ip_3:
      hidden: false
      immutable: false
      type: string
      description: OAM (LI-X1) v4 IP of CIF02 instance
    cif_oam_ip_2:
      hidden: false
      immutable: false
      type: string
      description: OAM (LI-X1) v4 IP of CIF01 instance
    cif_oam_ip_1:
      hidden: false
      immutable: false
      type: string
      description: OAM IP of CIF02 instance
    cdi_ims_core_v6_vip_0:
      hidden: false
      immutable: false
      type: string
      description: IMS CORE LAN CIPA v6 IP of CDI
    vcscf_dn:
      hidden: false
      immutable: false
      type: string
      description: DN name
    vcscf_du:
      hidden: false
      immutable: false
      type: string
      description: DU name
    cscf_internal_zone_0_ips:
      hidden: false
      immutable: false
      type: list
      description: List of Internal Lan IPs for CSCF instances on zone 0
      default:
      - 192.168.210.16
      - 192.168.210.18
      - 192.168.210.20
      - 192.168.210.22
      - 192.168.210.24
      - 192.168.210.26
      - 192.168.210.28
      - 192.168.210.30
      - 192.168.210.32
      - 192.168.210.34
      - 192.168.210.36
      - 192.168.210.38
      - 192.168.210.40
      - 192.168.210.42
      - 192.168.210.44
      - 192.168.210.46
      - 192.168.210.48
      - 192.168.210.50
      - 192.168.210.52
      entry_schema:
        type: string
    tdcore_internal_zone_0_ips:
      hidden: false
      immutable: false
      type: list
      description: List of Internal Lan IPs for TDCORE instances on zone 0
      default:
      - 192.168.210.8
      - 192.168.210.10
      - 192.168.210.12
      - 192.168.210.14
      entry_schema:
        type: string
    lbd_name_1:
      hidden: false
      immutable: false
      type: string
      description: LBD02 instance name
    lbd_name_0:
      hidden: false
      immutable: false
      type: string
      description: LBD01 instance name
  node_templates:
    cscf_RSG:
      type: org.openecomp.resource.vfc.rules.nodes.heat.network.neutron.SecurityRules
      properties:
        name:
          str_replace:
            template: $VNF$DELsecurity$DELgroup
            params:
              $DEL:
                get_input: vcscf_name_delimeter
              $VNF:
                get_input: vnf_name
        description: Allow all
        rules:
        - ethertype: IPv4
          direction: ingress
        - ethertype: IPv4
          direction: egress
        - ethertype: IPv6
          direction: ingress
        - ethertype: IPv6
          direction: egress
      requirements:
      - port:
          capability: tosca.capabilities.Attachment
          node: cif_internal_vip_0_port
          relationship: org.openecomp.relationships.AttachesTo
      - port:
          capability: tosca.capabilities.Attachment
          node: cif_oam_vip_1_port
          relationship: org.openecomp.relationships.AttachesTo
      - port:
          capability: tosca.capabilities.Attachment
          node: cif_ims_core_v6_vip_2_port
          relationship: org.openecomp.relationships.AttachesTo
      - port:
          capability: tosca.capabilities.Attachment
          node: cif_oam_vip_3_port
          relationship: org.openecomp.relationships.AttachesTo
      - port:
          capability: tosca.capabilities.Attachment
          node: cif_ims_li_v6_vip_4_port
          relationship: org.openecomp.relationships.AttachesTo
      - port:
          capability: tosca.capabilities.Attachment
          node: lbd_internal_dpdk_vip_1_port
          relationship: org.openecomp.relationships.AttachesTo
      - port:
          capability: tosca.capabilities.Attachment
          node: lbd_ims_core_v6_vip_2_port
          relationship: org.openecomp.relationships.AttachesTo
      - port:
          capability: tosca.capabilities.Attachment
          node: cdi_internal_v6_vip_0_port
          relationship: org.openecomp.relationships.AttachesTo
      - port:
          capability: tosca.capabilities.Attachment
          node: cdi_ims_core_v6_vip_1_port
          relationship: org.openecomp.relationships.AttachesTo
      - port:
          capability: tosca.capabilities.Attachment
          node: oam_internal_vip_0_port
          relationship: org.openecomp.relationships.AttachesTo
      - port:
          capability: tosca.capabilities.Attachment
          node: oam_oam_vip_1_port
          relationship: org.openecomp.relationships.AttachesTo
      - port:
          capability: attachment_oam_oam_internal_0_port
          node: abstract_oam
          relationship: org.openecomp.relationships.AttachesTo
      - port:
          capability: attachment_oam_oam_oam_0_port
          node: abstract_oam
          relationship: org.openecomp.relationships.AttachesTo
      - port:
          capability: attachment_oam_oam_internal_1_port
          node: abstract_oam_1
          relationship: org.openecomp.relationships.AttachesTo
      - port:
          capability: attachment_oam_oam_oam_1_port
          node: abstract_oam_1
          relationship: org.openecomp.relationships.AttachesTo
      - port:
          capability: attachment_oam_oam_internal_2_port
          node: abstract_oam_2
          relationship: org.openecomp.relationships.AttachesTo
      - port:
          capability: attachment_oam_oam_oam_2_port
          node: abstract_oam_2
          relationship: org.openecomp.relationships.AttachesTo
      - port:
          capability: attachment_cif_cif_internal_0_port
          node: abstract_cif
          relationship: org.openecomp.relationships.AttachesTo
      - port:
          capability: attachment_cif_cif_oam_0_port_1
          node: abstract_cif
          relationship: org.openecomp.relationships.AttachesTo
      - port:
          capability: attachment_cif_cif_ims_core_0_port
          node: abstract_cif
          relationship: org.openecomp.relationships.AttachesTo
      - port:
          capability: attachment_cif_cif_oam_0_port_3
          node: abstract_cif
          relationship: org.openecomp.relationships.AttachesTo
      - port:
          capability: attachment_cif_cif_ims_li_0_port
          node: abstract_cif
          relationship: org.openecomp.relationships.AttachesTo
      - port:
          capability: attachment_cif_cif_internal_1_port
          node: abstract_cif_1
          relationship: org.openecomp.relationships.AttachesTo
      - port:
          capability: attachment_cif_cif_oam_1_port_1
          node: abstract_cif_1
          relationship: org.openecomp.relationships.AttachesTo
      - port:
          capability: attachment_cif_cif_ims_core_1_port
          node: abstract_cif_1
          relationship: org.openecomp.relationships.AttachesTo
      - port:
          capability: attachment_cif_cif_oam_1_port_3
          node: abstract_cif_1
          relationship: org.openecomp.relationships.AttachesTo
      - port:
          capability: attachment_cif_cif_ims_li_1_port
          node: abstract_cif_1
          relationship: org.openecomp.relationships.AttachesTo
      - port:
          capability: attachment_lbd_lbd_internal_0_port
          node: abstract_lbd_1
          relationship: org.openecomp.relationships.AttachesTo
      - port:
          capability: attachment_lbd_lbd_dpdk_0_port
          node: abstract_lbd_1
          relationship: org.openecomp.relationships.AttachesTo
      - port:
          capability: attachment_lbd_lbd_ims_core_0_port
          node: abstract_lbd_1
          relationship: org.openecomp.relationships.AttachesTo
      - port:
          capability: attachment_lbd_lbd_internal_1_port
          node: abstract_lbd
          relationship: org.openecomp.relationships.AttachesTo
      - port:
          capability: attachment_lbd_lbd_dpdk_1_port
          node: abstract_lbd
          relationship: org.openecomp.relationships.AttachesTo
      - port:
          capability: attachment_lbd_lbd_ims_core_1_port
          node: abstract_lbd
          relationship: org.openecomp.relationships.AttachesTo
      - port:
          capability: attachment_cdi_cdi_internal_0_port
          node: abstract_cdi
          relationship: org.openecomp.relationships.AttachesTo
      - port:
          capability: attachment_cdi_cdi_ims_core_0_port
          node: abstract_cdi
          relationship: org.openecomp.relationships.AttachesTo
      - port:
          capability: attachment_cdi_cdi_internal_1_port
          node: abstract_cdi_1
          relationship: org.openecomp.relationships.AttachesTo
      - port:
          capability: attachment_cdi_cdi_ims_core_1_port
          node: abstract_cdi_1
          relationship: org.openecomp.relationships.AttachesTo
      - port:
          capability: attachment_tdcore_internal_0_port_0
          node: tdcore_zone_0_RRG
          relationship: org.openecomp.relationships.AttachesTo
      - port:
          capability: attachment_tdcore_dpdk_0_port_1
          node: tdcore_zone_0_RRG
          relationship: org.openecomp.relationships.AttachesTo
      - port:
          capability: attachment_tdcore_internal_0_port_0
          node: tdcore_zone_1_RRG
          relationship: org.openecomp.relationships.AttachesTo
      - port:
          capability: attachment_tdcore_dpdk_0_port_1
          node: tdcore_zone_1_RRG
          relationship: org.openecomp.relationships.AttachesTo
      - port:
          capability: attachment_cscf_internal_0_port_0
          node: cscf_zone_0_RRG
          relationship: org.openecomp.relationships.AttachesTo
      - port:
          capability: attachment_cscf_internal_0_port_0
          node: cscf_zone_1_RRG
          relationship: org.openecomp.relationships.AttachesTo
    cdi_internal_v6_vip_0_port:
      type: org.openecomp.resource.cp.nodes.heat.network.neutron.Port
      properties:
        ip_requirements:
        - ip_version: 4
          ip_count_required:
            is_required: true
          floating_ip_count_required:
            is_required: false
        security_groups:
        - cscf_RSG
        fixed_ips:
        - ip_address:
            get_input: cdi_internal_v6_vip_0
        mac_requirements:
          mac_count_required:
            is_required: false
        name:
          str_replace:
            template: $NAME$DELcdi$DELinternal$DELvip$DELv6
            params:
              $NAME:
                get_input: vnf_name
              $DEL:
                get_input: vcscf_name_delimeter
        network: cscf_internal_network_0
      requirements:
      - link:
          capability: tosca.capabilities.network.Linkable
          node: cscf_internal_network_0
          relationship: tosca.relationships.network.LinksTo
      - dependency:
          capability: tosca.capabilities.Node
          node: cscf_internal_network_0
          relationship: tosca.relationships.DependsOn
    cscf_internal_dpdk_network_0:
      type: org.openecomp.resource.vl.nodes.heat.network.neutron.Net
      properties:
        dhcp_enabled: false
        shared: false
        admin_state_up: true
        network_name:
          str_replace:
            template: $PREFIX$DELinternal$DELdpdk$DELnetwork
            params:
              $PREFIX:
                get_input: vnf_name
              $DEL:
                get_input: vcscf_name_delimeter
        subnets:
          cscf_internal_dpdk_subnet_0:
            enable_dhcp: false
            name:
              str_replace:
                template: $PREFIX$DELinternal$DELdpdk$DELsubnet
                params:
                  $PREFIX:
                    get_input: vnf_name
                  $DEL:
                    get_input: vcscf_name_delimeter
            cidr:
              get_input: vcscf_internal_dpdk_network_cidr
    cif_ims_core_v6_vip_2_port:
      type: org.openecomp.resource.cp.nodes.heat.network.neutron.Port
      properties:
        ip_requirements:
        - ip_version: 4
          ip_count_required:
            is_required: true
          floating_ip_count_required:
            is_required: false
        security_groups:
        - cscf_RSG
        fixed_ips:
        - ip_address:
            get_input: cif_ims_core_v6_vip_0
        mac_requirements:
          mac_count_required:
            is_required: false
        name:
          str_replace:
            template: $NAME$DELcif$DELims$DELcore$DELvip$DELv6
            params:
              $NAME:
                get_input: vnf_name
              $DEL:
                get_input: vcscf_name_delimeter
        network_role_tag: ims_core
        network:
          get_input: ims_core_net_id
    abstract_cdi_1:
      type: org.openecomp.resource.abstract.nodes.cdi_1
      directives:
      - substitutable
      properties:
        port_cdi_ims_core_1_port_security_groups:
        - - cscf_RSG
        vm_flavor_name:
          get_input: cdi_flavor_name
        port_cdi_internal_1_port_security_groups:
        - - cscf_RSG
        port_cdi_ims_core_1_port_mac_requirements:
          mac_count_required:
            is_required: false
        vm_image_name:
          get_input: cdi_image_name
        compute_cdi_scheduler_hints:
        - group: cdi_server_group_group
        port_cdi_ims_core_1_port_fixed_ips:
        - ip_address:
            get_input: cdi_ims_core_v6_ip_1
        compute_cdi_name:
        - get_input: cdi_name_1
        port_cdi_ims_core_1_port_network_role_tag: ims_core
        port_cdi_ims_core_1_port_name:
        - str_replace:
            template: $PREFIX$DELeth1
            params:
              $PREFIX:
                get_input: cdi_name_1
              $DEL:
                get_input: vcscf_name_delimeter
        compute_cdi_user_data_format:
        - RAW
        port_cdi_ims_core_1_port_network:
        - get_input: ims_core_net_id
        compute_cdi_availability_zone:
        - get_input: availability_zone_1
        port_cdi_internal_1_port_network:
        - cscf_internal_network_0
        port_cdi_ims_core_1_port_ip_requirements:
        - ip_version: 4
          ip_count_required:
            is_required: true
          floating_ip_count_required:
            is_required: true
        port_cdi_internal_1_port_allowed_address_pairs:
        - ip_address: 0.0.0.0/1
        - ip_address: 128.0.0.0/1
        - ip_address: ::/1
        - ip_address: 8000::/1
        compute_cdi_config_drive:
        - true
        port_cdi_internal_1_port_mac_requirements:
          mac_count_required:
            is_required: false
        port_cdi_ims_core_1_port_allowed_address_pairs:
        - ip_address:
            get_input: cdi_ims_core_v6_vip_0
        port_cdi_internal_1_port_fixed_ips:
        - ip_address:
            get_input: cdi_internal_ip_1
        - ip_address:
            get_input: cdi_internal_v6_ip_1
        port_cdi_internal_1_port_name:
        - str_replace:
            template: $PREFIX$DELeth0
            params:
              $PREFIX:
                get_input: cdi_name_1
              $DEL:
                get_input: vcscf_name_delimeter
        port_cdi_internal_1_port_ip_requirements:
        - ip_version: 6
          ip_count_required:
            is_required: true
          floating_ip_count_required:
            is_required: false
        compute_cdi_metadata:
        - vf_module_id:
            get_input: vf_module_id
          vm_role: cdi
          vnf_id:
            get_input: vnf_id
          vnf_name:
            get_input: vnf_name
          vf_module_name:
            get_input: vf_module_name
        service_template_filter:
          substitute_service_template: Nested_cdi_1ServiceTemplate.yaml
          count: 1
        index_value:
          get_property:
          - SELF
          - service_template_filter
          - index_value
      requirements:
      - link_cdi_cdi_internal_1_port:
          capability: tosca.capabilities.network.Linkable
          node: cscf_internal_network_0
          relationship: tosca.relationships.network.LinksTo
      - dependency_cdi_cdi_internal_1_port:
          capability: tosca.capabilities.Node
          node: cscf_internal_network_0
          relationship: tosca.relationships.DependsOn
    cif_internal_vip_0_port:
      type: org.openecomp.resource.cp.nodes.heat.network.neutron.Port
      properties:
        ip_requirements:
        - ip_version: 4
          ip_count_required:
            is_required: true
          floating_ip_count_required:
            is_required: false
        security_groups:
        - cscf_RSG
        fixed_ips:
        - ip_address:
            get_input: cif_internal_vip_0
        mac_requirements:
          mac_count_required:
            is_required: false
        name:
          str_replace:
            template: $NAME$DELcif$DELinternal$DELvip
            params:
              $NAME:
                get_input: vnf_name
              $DEL:
                get_input: vcscf_name_delimeter
        network: cscf_internal_network_0
      requirements:
      - link:
          capability: tosca.capabilities.network.Linkable
          node: cscf_internal_network_0
          relationship: tosca.relationships.network.LinksTo
      - dependency:
          capability: tosca.capabilities.Node
          node: cscf_internal_network_0
          relationship: tosca.relationships.DependsOn
    cscf_zone_1_RRG:
      type: org.openecomp.resource.abstract.nodes.heat.cscf
      directives:
      - substitutable
      properties:
        vf_module_id:
          get_input: vf_module_id
        internal_net_id: cscf_internal_network_0
        vcscf_release:
          get_input: vcscf_release
        cscf_internal_ips:
          get_input: cscf_internal_zone_1_ips
        vcscf_gateway:
          get_input: oam_internal_vip_0
        vnf_name:
          get_input: vnf_name
        vf_module_name:
          get_input: vf_module_name
        cscf_image_name:
          get_input: cscf_image_name
        cscf_names:
          get_input: cscf_zone_1_names
        service_template_filter:
          substitute_service_template: nested_cscfServiceTemplate.yaml
          count:
            get_input: cscf_zone_1_count
          mandatory: false
        vcscf_swrepo_address:
          get_input: vcscf_swrepo_address
        cscf_uuids:
          get_input: cscf_zone_1_uuids
        vnf_id:
          get_input: vnf_id
        availability_zone_0:
          get_input: availability_zone_1
        cscf_internal_v6_ips:
          get_input: cscf_internal_zone_1_v6_ips
        cscf_flavor_name:
          get_input: cscf_flavor_name
        vcscf_cmrepo_address:
          get_input: vcscf_cmrepo_address
        vcscf_dns_address:
          get_input: vcscf_dns_address
        vcscf_internal_network_mtu:
          get_input: vcscf_internal_network_mtu
        port_cscf_internal_0_port_0_ip_requirements:
        - ip_version: 6
          ip_count_required:
            is_required: true
          floating_ip_count_required:
            is_required: false
        index:
          get_property:
          - SELF
          - service_template_filter
          - index_value
        vcscf_internal_netmask:
          get_input: vcscf_internal_netmask
        vcscf_name_delimeter:
          get_input: vcscf_name_delimeter
        port_cscf_internal_0_port_0_network_role_tag: internal
        vcscf_dn:
          get_input: vcscf_dn
        vcscf_du:
          get_input: vcscf_du
        port_cscf_internal_0_port_0_mac_requirements:
          mac_count_required:
            is_required: false
        cscf_security_group: cscf_RSG
      requirements:
      - link_cscf_internal_0_port_0:
          capability: tosca.capabilities.network.Linkable
          node: cscf_internal_network_0
          relationship: tosca.relationships.network.LinksTo
      - dependency_cscf_server_0:
          capability: tosca.capabilities.Node
          node: cscf_internal_network_0
          relationship: tosca.relationships.DependsOn
    oam_oam_vip_1_port:
      type: org.openecomp.resource.cp.nodes.heat.network.neutron.Port
      properties:
        ip_requirements:
        - ip_version: 4
          ip_count_required:
            is_required: true
          floating_ip_count_required:
            is_required: false
        security_groups:
        - cscf_RSG
        fixed_ips:
        - ip_address:
            get_input: oam_oam_vip_0
        mac_requirements:
          mac_count_required:
            is_required: false
        name:
          str_replace:
            template: $NAME$DELoam$DELoam$DELvip
            params:
              $NAME:
                get_input: vnf_name
              $DEL:
                get_input: vcscf_name_delimeter
        network_role_tag: oam
        network:
          get_input: oam_net_id
    tdcore_zone_0_RRG:
      type: org.openecomp.resource.abstract.nodes.heat.tdcore
      directives:
      - substitutable
      properties:
        vf_module_id:
          get_input: vf_module_id
        internal_net_id: cscf_internal_network_0
        vcscf_release:
          get_input: vcscf_release
        tdcore_security_group: cscf_RSG
        tdcore_names:
          get_input: tdcore_zone_0_names
        port_tdcore_dpdk_0_port_1_network_role_tag: internal_dpdk
        port_tdcore_dpdk_0_port_1_ip_requirements:
        - ip_version: 4
          ip_count_required:
            is_required: true
          floating_ip_count_required:
            is_required: false
        vcscf_gateway:
          get_input: oam_internal_vip_0
        vnf_name:
          get_input: vnf_name
        internal_dpdk_net_id: cscf_internal_dpdk_network_0
        vf_module_name:
          get_input: vf_module_name
        service_template_filter:
          substitute_service_template: nested_tdcoreServiceTemplate.yaml
          count:
            get_input: tdcore_zone_0_count
          mandatory: false
        vcscf_swrepo_address:
          get_input: vcscf_swrepo_address
        vnf_id:
          get_input: vnf_id
        availability_zone_0:
          get_input: availability_zone_0
        port_tdcore_dpdk_0_port_1_mac_requirements:
          mac_count_required:
            is_required: false
        tdcore_flavor_name:
          get_input: tdcore_flavor_name
        tdcore_image_name:
          get_input: tdcore_image_name
        vcscf_cmrepo_address:
          get_input: vcscf_cmrepo_address
        vcscf_dns_address:
          get_input: vcscf_dns_address
        vcscf_internal_network_mtu:
          get_input: vcscf_internal_network_mtu
        tdcore_server_group: tdcore_zone_0_server_group_group
        index:
          get_property:
          - SELF
          - service_template_filter
          - index_value
        vcscf_internal_netmask:
          get_input: vcscf_internal_netmask
        port_tdcore_internal_0_port_0_ip_requirements:
        - ip_version: 4
          ip_count_required:
            is_required: true
          floating_ip_count_required:
            is_required: false
        vcscf_name_delimeter:
          get_input: vcscf_name_delimeter
        tdcore_internal_ips:
          get_input: tdcore_internal_zone_0_ips
        tdcore_dpdk_ips:
          get_input: tdcore_dpdk_zone_0_ips
        tdcore_uuids:
          get_input: tdcore_zone_0_uuids
        vcscf_dn:
          get_input: vcscf_dn
        port_tdcore_internal_0_port_0_network_role_tag: internal
        port_tdcore_internal_0_port_0_mac_requirements:
          mac_count_required:
            is_required: false
        vcscf_du:
          get_input: vcscf_du
      requirements:
      - link_tdcore_internal_0_port_0:
          capability: tosca.capabilities.network.Linkable
          node: cscf_internal_network_0
          relationship: tosca.relationships.network.LinksTo
      - link_tdcore_dpdk_0_port_1:
          capability: tosca.capabilities.network.Linkable
          node: cscf_internal_dpdk_network_0
          relationship: tosca.relationships.network.LinksTo
      - dependency_tdcore_server_0:
          capability: tosca.capabilities.Node
          node: cscf_internal_network_0
          relationship: tosca.relationships.DependsOn
      - dependency_tdcore_server_0:
          capability: tosca.capabilities.Node
          node: cscf_internal_dpdk_network_0
          relationship: tosca.relationships.DependsOn
    lbd_ims_core_v6_vip_2_port:
      type: org.openecomp.resource.cp.nodes.heat.network.neutron.Port
      properties:
        ip_requirements:
        - ip_version: 4
          ip_count_required:
            is_required: true
          floating_ip_count_required:
            is_required: false
        security_groups:
        - cscf_RSG
        fixed_ips:
        - ip_address:
            get_input: lbd_ims_core_v6_vip_0
        mac_requirements:
          mac_count_required:
            is_required: false
        name:
          str_replace:
            template: $NAME$DELlbd$DELims$DELcore$DELvip$DELv6
            params:
              $NAME:
                get_input: vnf_name
              $DEL:
                get_input: vcscf_name_delimeter
        network_role_tag: ims_core
        network:
          get_input: ims_core_net_id
    cif_oam_vip_1_port:
      type: org.openecomp.resource.cp.nodes.heat.network.neutron.Port
      properties:
        ip_requirements:
        - ip_version: 4
          ip_count_required:
            is_required: true
          floating_ip_count_required:
            is_required: false
        security_groups:
        - cscf_RSG
        fixed_ips:
        - ip_address:
            get_input: cif_oam_vip_0
        mac_requirements:
          mac_count_required:
            is_required: false
        name:
          str_replace:
            template: $NAME$DELcif$DELoam$DELvip0
            params:
              $NAME:
                get_input: vnf_name
              $DEL:
                get_input: vcscf_name_delimeter
        network_role_tag: oam
        network:
          get_input: oam_net_id
    oam_volume_0:
      type: org.openecomp.resource.vfc.nodes.heat.cinder.Volume
      properties:
        availability_zone:
          get_input: availability_zone_0
        size: '(get_input : oam_volume_size_0) * 1024'
        name:
          str_replace:
            template: $VNF$DELoam$DELvolume$DEL0
            params:
              $DEL:
                get_input: vcscf_name_delimeter
              $VNF:
                get_input: vnf_name
    abstract_lbd:
      type: org.openecomp.resource.abstract.nodes.lbd
      directives:
      - substitutable
      properties:
        port_lbd_ims_core_1_port_allowed_address_pairs:
        - ip_address:
            get_input: lbd_ims_core_v6_vip_0
        compute_lbd_user_data_format:
        - RAW
        compute_lbd_config_drive:
        - true
        port_lbd_internal_1_port_name:
        - str_replace:
            template: $PREFIX$DELeth0
            params:
              $PREFIX:
                get_input: lbd_name_1
              $DEL:
                get_input: vcscf_name_delimeter
        port_lbd_dpdk_1_port_allowed_address_pairs:
        - ip_address: 0.0.0.0/1
        - ip_address: 128.0.0.0/1
        - ip_address: ::/1
        - ip_address: 8000::/1
        port_lbd_ims_core_1_port_ip_requirements:
        - ip_version: 4
          ip_count_required:
            is_required: true
          floating_ip_count_required:
            is_required: true
        port_lbd_dpdk_1_port_mac_requirements:
          mac_count_required:
            is_required: false
        vm_flavor_name:
          get_input: lbd_flavor_name
        port_lbd_ims_core_1_port_mac_requirements:
          mac_count_required:
            is_required: false
        compute_lbd_availability_zone:
        - get_input: availability_zone_1
        port_lbd_internal_1_port_ip_requirements:
        - ip_version: 4
          ip_count_required:
            is_required: true
          floating_ip_count_required:
            is_required: false
        port_lbd_internal_1_port_security_groups:
        - - cscf_RSG
        vm_image_name:
          get_input: lbd_image_name
        port_lbd_dpdk_1_port_network:
        - cscf_internal_dpdk_network_0
        port_lbd_ims_core_1_port_name:
        - str_replace:
            template: $PREFIX$DELeth2
            params:
              $PREFIX:
                get_input: lbd_name_1
              $DEL:
                get_input: vcscf_name_delimeter
        port_lbd_ims_core_1_port_security_groups:
        - - cscf_RSG
        port_lbd_ims_core_1_port_fixed_ips:
        - ip_address:
            get_input: lbd_ims_core_v6_ip_1
        port_lbd_internal_1_port_fixed_ips:
        - ip_address:
            get_input: lbd_internal_ip_1
        port_lbd_ims_core_1_port_network:
        - get_input: ims_core_net_id
        compute_lbd_scheduler_hints:
        - group: lbd_server_group_group
        port_lbd_dpdk_1_port_name:
        - str_replace:
            template: $PREFIX$DELeth1
            params:
              $PREFIX:
                get_input: lbd_name_1
              $DEL:
                get_input: vcscf_name_delimeter
        port_lbd_dpdk_1_port_security_groups:
        - - cscf_RSG
        port_lbd_dpdk_1_port_fixed_ips:
        - ip_address:
            get_input: lbd_internal_dpdk_ip_1
        port_lbd_internal_1_port_network:
        - cscf_internal_network_0
        port_lbd_dpdk_1_port_ip_requirements:
        - ip_version: 4
          ip_count_required:
            is_required: true
          floating_ip_count_required:
            is_required: false
        compute_lbd_metadata:
        - vf_module_id:
            get_input: vf_module_id
          vm_role: lbd
          vnf_id:
            get_input: vnf_id
          vnf_name:
            get_input: vnf_name
          vf_module_name:
            get_input: vf_module_name
        port_lbd_internal_1_port_mac_requirements:
          mac_count_required:
            is_required: false
        compute_lbd_name:
        - get_input: lbd_name_1
        port_lbd_ims_core_1_port_network_role_tag: ims_core
        service_template_filter:
          substitute_service_template: Nested_lbdServiceTemplate.yaml
          count: 1
        index_value:
          get_property:
          - SELF
          - service_template_filter
          - index_value
      requirements:
      - link_lbd_lbd_internal_1_port:
          capability: tosca.capabilities.network.Linkable
          node: cscf_internal_network_0
          relationship: tosca.relationships.network.LinksTo
      - dependency_lbd_lbd_internal_1_port:
          capability: tosca.capabilities.Node
          node: cscf_internal_network_0
          relationship: tosca.relationships.DependsOn
      - link_lbd_lbd_dpdk_1_port:
          capability: tosca.capabilities.network.Linkable
          node: cscf_internal_dpdk_network_0
          relationship: tosca.relationships.network.LinksTo
      - dependency_lbd_lbd_dpdk_1_port:
          capability: tosca.capabilities.Node
          node: cscf_internal_dpdk_network_0
          relationship: tosca.relationships.DependsOn
    oam_internal_vip_0_port:
      type: org.openecomp.resource.cp.nodes.heat.network.neutron.Port
      properties:
        ip_requirements:
        - ip_version: 4
          ip_count_required:
            is_required: true
          floating_ip_count_required:
            is_required: false
        security_groups:
        - cscf_RSG
        fixed_ips:
        - ip_address:
            get_input: oam_internal_vip_0
        mac_requirements:
          mac_count_required:
            is_required: false
        name:
          str_replace:
            template: $NAME$DELoam$DELinternal$DELvip
            params:
              $NAME:
                get_input: vnf_name
              $DEL:
                get_input: vcscf_name_delimeter
        network: cscf_internal_network_0
      requirements:
      - link:
          capability: tosca.capabilities.network.Linkable
          node: cscf_internal_network_0
          relationship: tosca.relationships.network.LinksTo
      - dependency:
          capability: tosca.capabilities.Node
          node: cscf_internal_network_0
          relationship: tosca.relationships.DependsOn
    tdcore_zone_1_RRG:
      type: org.openecomp.resource.abstract.nodes.heat.tdcore
      directives:
      - substitutable
      properties:
        vf_module_id:
          get_input: vf_module_id
        internal_net_id: cscf_internal_network_0
        vcscf_release:
          get_input: vcscf_release
        tdcore_security_group: cscf_RSG
        tdcore_names:
          get_input: tdcore_zone_1_names
        port_tdcore_dpdk_0_port_1_network_role_tag: internal_dpdk
        port_tdcore_dpdk_0_port_1_ip_requirements:
        - ip_version: 4
          ip_count_required:
            is_required: true
          floating_ip_count_required:
            is_required: false
        vcscf_gateway:
          get_input: oam_internal_vip_0
        vnf_name:
          get_input: vnf_name
        internal_dpdk_net_id: cscf_internal_dpdk_network_0
        vf_module_name:
          get_input: vf_module_name
        service_template_filter:
          substitute_service_template: nested_tdcoreServiceTemplate.yaml
          count:
            get_input: tdcore_zone_1_count
          mandatory: false
        vcscf_swrepo_address:
          get_input: vcscf_swrepo_address
        vnf_id:
          get_input: vnf_id
        availability_zone_0:
          get_input: availability_zone_1
        port_tdcore_dpdk_0_port_1_mac_requirements:
          mac_count_required:
            is_required: false
        tdcore_flavor_name:
          get_input: tdcore_flavor_name
        tdcore_image_name:
          get_input: tdcore_image_name
        vcscf_cmrepo_address:
          get_input: vcscf_cmrepo_address
        vcscf_dns_address:
          get_input: vcscf_dns_address
        vcscf_internal_network_mtu:
          get_input: vcscf_internal_network_mtu
        tdcore_server_group: tdcore_zone_1_server_group_group
        index:
          get_property:
          - SELF
          - service_template_filter
          - index_value
        vcscf_internal_netmask:
          get_input: vcscf_internal_netmask
        port_tdcore_internal_0_port_0_ip_requirements:
        - ip_version: 4
          ip_count_required:
            is_required: true
          floating_ip_count_required:
            is_required: false
        vcscf_name_delimeter:
          get_input: vcscf_name_delimeter
        tdcore_internal_ips:
          get_input: tdcore_internal_zone_1_ips
        tdcore_dpdk_ips:
          get_input: tdcore_dpdk_zone_1_ips
        tdcore_uuids:
          get_input: tdcore_zone_1_uuids
        vcscf_dn:
          get_input: vcscf_dn
        port_tdcore_internal_0_port_0_network_role_tag: internal
        port_tdcore_internal_0_port_0_mac_requirements:
          mac_count_required:
            is_required: false
        vcscf_du:
          get_input: vcscf_du
      requirements:
      - link_tdcore_internal_0_port_0:
          capability: tosca.capabilities.network.Linkable
          node: cscf_internal_network_0
          relationship: tosca.relationships.network.LinksTo
      - link_tdcore_dpdk_0_port_1:
          capability: tosca.capabilities.network.Linkable
          node: cscf_internal_dpdk_network_0
          relationship: tosca.relationships.network.LinksTo
      - dependency_tdcore_server_0:
          capability: tosca.capabilities.Node
          node: cscf_internal_network_0
          relationship: tosca.relationships.DependsOn
      - dependency_tdcore_server_0:
          capability: tosca.capabilities.Node
          node: cscf_internal_dpdk_network_0
          relationship: tosca.relationships.DependsOn
    oam_volume_1:
      type: org.openecomp.resource.vfc.nodes.heat.cinder.Volume
      properties:
        availability_zone:
          get_input: availability_zone_1
        size: '(get_input : oam_volume_size_0) * 1024'
        name:
          str_replace:
            template: $VNF$DELoam$DELvolume$DEL1
            params:
              $DEL:
                get_input: vcscf_name_delimeter
              $VNF:
                get_input: vnf_name
    abstract_cdi:
      type: org.openecomp.resource.abstract.nodes.cdi
      directives:
      - substitutable
      properties:
        port_cdi_internal_0_port_ip_requirements:
        - ip_version: 6
          ip_count_required:
            is_required: true
          floating_ip_count_required:
            is_required: false
        vm_flavor_name:
          get_input: cdi_flavor_name
        port_cdi_ims_core_0_port_name:
        - str_replace:
            template: $PREFIX$DELeth1
            params:
              $PREFIX:
                get_input: cdi_name_0
              $DEL:
                get_input: vcscf_name_delimeter
        port_cdi_internal_0_port_allowed_address_pairs:
        - ip_address: 0.0.0.0/1
        - ip_address: 128.0.0.0/1
        - ip_address: ::/1
        - ip_address: 8000::/1
        vm_image_name:
          get_input: cdi_image_name
        compute_cdi_scheduler_hints:
        - group: cdi_server_group_group
        compute_cdi_name:
        - get_input: cdi_name_0
        port_cdi_ims_core_0_port_ip_requirements:
        - ip_version: 4
          ip_count_required:
            is_required: true
          floating_ip_count_required:
            is_required: true
        port_cdi_ims_core_0_port_network_role_tag: ims_core
        compute_cdi_user_data_format:
        - RAW
        port_cdi_internal_0_port_name:
        - str_replace:
            template: $PREFIX$DELeth0
            params:
              $PREFIX:
                get_input: cdi_name_0
              $DEL:
                get_input: vcscf_name_delimeter
        compute_cdi_availability_zone:
        - get_input: availability_zone_0
        port_cdi_ims_core_0_port_network:
        - get_input: ims_core_net_id
        port_cdi_internal_0_port_network:
        - cscf_internal_network_0
        port_cdi_internal_0_port_fixed_ips:
        - ip_address:
            get_input: cdi_internal_ip_0
        - ip_address:
            get_input: cdi_internal_v6_ip_0
        compute_cdi_config_drive:
        - true
        port_cdi_internal_0_port_security_groups:
        - - cscf_RSG
        port_cdi_ims_core_0_port_security_groups:
        - - cscf_RSG
        port_cdi_ims_core_0_port_fixed_ips:
        - ip_address:
            get_input: cdi_ims_core_v6_ip_0
        port_cdi_internal_0_port_mac_requirements:
          mac_count_required:
            is_required: false
        port_cdi_ims_core_0_port_allowed_address_pairs:
        - ip_address:
            get_input: cdi_ims_core_v6_vip_0
        compute_cdi_metadata:
        - vf_module_id:
            get_input: vf_module_id
          vm_role: cdi
          vnf_id:
            get_input: vnf_id
          vnf_name:
            get_input: vnf_name
          vf_module_name:
            get_input: vf_module_name
        port_cdi_ims_core_0_port_mac_requirements:
          mac_count_required:
            is_required: false
        service_template_filter:
          substitute_service_template: Nested_cdiServiceTemplate.yaml
          count: 1
        index_value:
          get_property:
          - SELF
          - service_template_filter
          - index_value
      requirements:
      - link_cdi_cdi_internal_0_port:
          capability: tosca.capabilities.network.Linkable
          node: cscf_internal_network_0
          relationship: tosca.relationships.network.LinksTo
      - dependency_cdi_cdi_internal_0_port:
          capability: tosca.capabilities.Node
          node: cscf_internal_network_0
          relationship: tosca.relationships.DependsOn
    cif_volume_0:
      type: org.openecomp.resource.vfc.nodes.heat.cinder.Volume
      properties:
        availability_zone:
          get_input: availability_zone_0
        size: '(get_input : cif_volume_size_0) * 1024'
        name:
          str_replace:
            template: $VNF$DELcif$DELvolume$DEL0
            params:
              $DEL:
                get_input: vcscf_name_delimeter
              $VNF:
                get_input: vnf_name
    cif_volume_1:
      type: org.openecomp.resource.vfc.nodes.heat.cinder.Volume
      properties:
        availability_zone:
          get_input: availability_zone_1
        size: '(get_input : cif_volume_size_0) * 1024'
        name:
          str_replace:
            template: $VNF$DELcif$DELvolume$DEL1
            params:
              $DEL:
                get_input: vcscf_name_delimeter
              $VNF:
                get_input: vnf_name
    abstract_oam_1:
      type: org.openecomp.resource.abstract.nodes.oam_1
      directives:
      - substitutable
      properties:
        port_oam_internal_1_port_security_groups:
        - - cscf_RSG
        port_oam_oam_1_port_allowed_address_pairs:
        - ip_address:
            get_input: oam_oam_vip_0
        vm_flavor_name:
          get_input: oam_flavor_name
        port_oam_oam_1_port_ip_requirements:
        - ip_version: 4
          ip_count_required:
            is_required: true
          floating_ip_count_required:
            is_required: true
        port_oam_oam_1_port_network_role_tag: oam
        port_oam_oam_1_port_security_groups:
        - - cscf_RSG
        vm_image_name:
          get_input: oam_image_name
        compute_oam_config_drive:
        - true
        port_oam_internal_1_port_network:
        - cscf_internal_network_0
        port_oam_oam_1_port_fixed_ips:
        - ip_address:
            get_input: oam_oam_ip_1
        port_oam_internal_1_port_ip_requirements:
        - ip_version: 4
          ip_count_required:
            is_required: true
          floating_ip_count_required:
            is_required: false
        port_oam_oam_1_port_network:
        - get_input: oam_net_id
        port_oam_internal_1_port_allowed_address_pairs:
        - ip_address: 0.0.0.0/1
        - ip_address: 128.0.0.0/1
        - ip_address: ::/1
        - ip_address: 8000::/1
        compute_oam_user_data_format:
        - RAW
        port_oam_internal_1_port_name:
        - str_replace:
            template: $PREFIX$DELeth0
            params:
              $PREFIX:
                get_input: oam_name_1
              $DEL:
                get_input: vcscf_name_delimeter
        port_oam_internal_1_port_fixed_ips:
        - ip_address:
            get_input: oam_internal_ip_1
        port_oam_oam_1_port_name:
        - str_replace:
            template: $PREFIX$DELeth1
            params:
              $PREFIX:
                get_input: oam_name_1
              $DEL:
                get_input: vcscf_name_delimeter
        compute_oam_scheduler_hints:
        - group: oam_server_group_group
        compute_oam_availability_zone:
        - get_input: availability_zone_1
        compute_oam_metadata:
        - vf_module_id:
            get_input: vf_module_id
          vm_role: oam
          vnf_id:
            get_input: vnf_id
          vnf_name:
            get_input: vnf_name
          vf_module_name:
            get_input: vf_module_name
        port_oam_internal_1_port_mac_requirements:
          mac_count_required:
            is_required: false
        compute_oam_name:
        - get_input: oam_name_1
        port_oam_oam_1_port_mac_requirements:
          mac_count_required:
            is_required: false
        service_template_filter:
          substitute_service_template: Nested_oam_1ServiceTemplate.yaml
          count: 1
        index_value:
          get_property:
          - SELF
          - service_template_filter
          - index_value
      requirements:
      - link_oam_oam_internal_1_port:
          capability: tosca.capabilities.network.Linkable
          node: cscf_internal_network_0
          relationship: tosca.relationships.network.LinksTo
      - dependency_oam_oam_internal_1_port:
          capability: tosca.capabilities.Node
          node: cscf_internal_network_0
          relationship: tosca.relationships.DependsOn
    abstract_oam_2:
      type: org.openecomp.resource.abstract.nodes.oam_2
      directives:
      - substitutable
      properties:
        port_oam_oam_2_port_network_role_tag: oam
        port_oam_oam_2_port_security_groups:
        - - cscf_RSG
        port_oam_oam_2_port_name:
        - str_replace:
            template: $PREFIX$DELeth1
            params:
              $PREFIX:
                get_input: oam_name_2
              $DEL:
                get_input: vcscf_name_delimeter
        port_oam_internal_2_port_name:
        - str_replace:
            template: $PREFIX$DELeth0
            params:
              $PREFIX:
                get_input: oam_name_2
              $DEL:
                get_input: vcscf_name_delimeter
        vm_flavor_name:
          get_input: oam_flavor_name
        port_oam_internal_2_port_mac_requirements:
          mac_count_required:
            is_required: false
        vm_image_name:
          get_input: oam_image_name
        compute_oam_config_drive:
        - true
        port_oam_internal_2_port_allowed_address_pairs:
        - ip_address: 0.0.0.0/1
        - ip_address: 128.0.0.0/1
        - ip_address: ::/1
        - ip_address: 8000::/1
        port_oam_internal_2_port_network:
        - cscf_internal_network_0
        port_oam_internal_2_port_fixed_ips:
        - ip_address:
            get_input: oam_internal_ip_2
        port_oam_oam_2_port_fixed_ips:
        - ip_address:
            get_input: oam_oam_ip_2
        port_oam_oam_2_port_mac_requirements:
          mac_count_required:
            is_required: false
        port_oam_oam_2_port_network:
        - get_input: oam_net_id
        compute_oam_user_data_format:
        - RAW
        port_oam_internal_2_port_security_groups:
        - - cscf_RSG
        port_oam_oam_2_port_ip_requirements:
        - ip_version: 4
          ip_count_required:
            is_required: true
          floating_ip_count_required:
            is_required: true
        compute_oam_scheduler_hints:
        - group: oam_server_group_group
        port_oam_internal_2_port_ip_requirements:
        - ip_version: 4
          ip_count_required:
            is_required: true
          floating_ip_count_required:
            is_required: false
        compute_oam_availability_zone:
        - get_input: availability_zone_0
        compute_oam_metadata:
        - vf_module_id:
            get_input: vf_module_id
          vm_role: oam
          vnf_id:
            get_input: vnf_id
          vnf_name:
            get_input: vnf_name
          vf_module_name:
            get_input: vf_module_name
        port_oam_oam_2_port_allowed_address_pairs:
        - ip_address:
            get_input: oam_oam_vip_0
        compute_oam_name:
        - get_input: oam_name_2
        service_template_filter:
          substitute_service_template: Nested_oam_2ServiceTemplate.yaml
          count: 1
        index_value:
          get_property:
          - SELF
          - service_template_filter
          - index_value
      requirements:
      - link_oam_oam_internal_2_port:
          capability: tosca.capabilities.network.Linkable
          node: cscf_internal_network_0
          relationship: tosca.relationships.network.LinksTo
      - dependency_oam_oam_internal_2_port:
          capability: tosca.capabilities.Node
          node: cscf_internal_network_0
          relationship: tosca.relationships.DependsOn
    cif_ims_li_v6_vip_4_port:
      type: org.openecomp.resource.cp.nodes.heat.network.neutron.Port
      properties:
        ip_requirements:
        - ip_version: 4
          ip_count_required:
            is_required: true
          floating_ip_count_required:
            is_required: false
        security_groups:
        - cscf_RSG
        fixed_ips:
        - ip_address:
            get_input: cif_ims_li_v6_vip_0
        mac_requirements:
          mac_count_required:
            is_required: false
        name:
          str_replace:
            template: $NAME$DELcif$DELims$DELli$DELvip$DELv6
            params:
              $NAME:
                get_input: vnf_name
              $DEL:
                get_input: vcscf_name_delimeter
        network_role_tag: ims_li_v6
        network:
          get_input: ims_li_v6_net_id
    cscf_internal_network_0:
      type: org.openecomp.resource.vl.nodes.heat.network.neutron.Net
      properties:
        dhcp_enabled: false
        shared: false
        ip_version: 4
        admin_state_up: true
        network_name:
          str_replace:
            template: $PREFIX$DELinternal$DELnetwork
            params:
              $PREFIX:
                get_input: vnf_name
              $DEL:
                get_input: vcscf_name_delimeter
        subnets:
          cscf_internal_subnet_0:
            enable_dhcp: false
            ip_version: 4
            name:
              str_replace:
                template: $PREFIX$DELinternal$DELsubnet
                params:
                  $PREFIX:
                    get_input: vnf_name
                  $DEL:
                    get_input: vcscf_name_delimeter
            cidr:
              get_input: vcscf_internal_network_cidr
          cscf_internal_subnet_v6_0:
            enable_dhcp: false
            ip_version: 6
            name:
              str_replace:
                template: $PREFIX$DELinternal$DELsubnetv6
                params:
                  $PREFIX:
                    get_input: vnf_name
                  $DEL:
                    get_input: vcscf_name_delimeter
            cidr:
              get_input: vcscf_internal_network_v6_cidr
    abstract_oam:
      type: org.openecomp.resource.abstract.nodes.oam
      directives:
      - substitutable
      properties:
        port_oam_oam_0_port_name:
        - str_replace:
            template: $PREFIX$DELeth1
            params:
              $PREFIX:
                get_input: oam_name_0
              $DEL:
                get_input: vcscf_name_delimeter
        port_oam_oam_0_port_fixed_ips:
        - ip_address:
            get_input: oam_oam_ip_0
        vm_flavor_name:
          get_input: oam_flavor_name
        port_oam_oam_0_port_mac_requirements:
          mac_count_required:
            is_required: false
        port_oam_internal_0_port_ip_requirements:
        - ip_version: 4
          ip_count_required:
            is_required: true
          floating_ip_count_required:
            is_required: false
        port_oam_internal_0_port_network:
        - cscf_internal_network_0
        vm_image_name:
          get_input: oam_image_name
        compute_oam_config_drive:
        - true
        port_oam_internal_0_port_name:
        - str_replace:
            template: $PREFIX$DELeth0
            params:
              $PREFIX:
                get_input: oam_name_0
              $DEL:
                get_input: vcscf_name_delimeter
        port_oam_oam_0_port_allowed_address_pairs:
        - ip_address:
            get_input: oam_oam_vip_0
        port_oam_internal_0_port_security_groups:
        - - cscf_RSG
        port_oam_internal_0_port_fixed_ips:
        - ip_address:
            get_input: oam_internal_ip_0
        port_oam_oam_0_port_network_role_tag: oam
        compute_oam_user_data_format:
        - RAW
        port_oam_oam_0_port_network:
        - get_input: oam_net_id
        port_oam_oam_0_port_ip_requirements:
        - ip_version: 4
          ip_count_required:
            is_required: true
          floating_ip_count_required:
            is_required: true
        port_oam_internal_0_port_mac_requirements:
          mac_count_required:
            is_required: false
        compute_oam_scheduler_hints:
        - group: oam_server_group_group
        port_oam_internal_0_port_allowed_address_pairs:
        - ip_address: 0.0.0.0/1
        - ip_address: 128.0.0.0/1
        - ip_address: ::/1
        - ip_address: 8000::/1
        compute_oam_availability_zone:
        - get_input: availability_zone_0
        compute_oam_metadata:
        - vf_module_id:
            get_input: vf_module_id
          vm_role: oam
          vnf_id:
            get_input: vnf_id
          vnf_name:
            get_input: vnf_name
          vf_module_name:
            get_input: vf_module_name
        compute_oam_name:
        - get_input: oam_name_0
        port_oam_oam_0_port_security_groups:
        - - cscf_RSG
        service_template_filter:
          substitute_service_template: Nested_oamServiceTemplate.yaml
          count: 1
        index_value:
          get_property:
          - SELF
          - service_template_filter
          - index_value
      requirements:
      - link_oam_oam_internal_0_port:
          capability: tosca.capabilities.network.Linkable
          node: cscf_internal_network_0
          relationship: tosca.relationships.network.LinksTo
      - dependency_oam_oam_internal_0_port:
          capability: tosca.capabilities.Node
          node: cscf_internal_network_0
          relationship: tosca.relationships.DependsOn
    abstract_lbd_1:
      type: org.openecomp.resource.abstract.nodes.lbd_1
      directives:
      - substitutable
      properties:
        compute_lbd_user_data_format:
        - RAW
        compute_lbd_config_drive:
        - true
        port_lbd_dpdk_0_port_fixed_ips:
        - ip_address:
            get_input: lbd_internal_dpdk_ip_0
        port_lbd_internal_0_port_security_groups:
        - - cscf_RSG
        vm_flavor_name:
          get_input: lbd_flavor_name
        port_lbd_dpdk_0_port_security_groups:
        - - cscf_RSG
        compute_lbd_availability_zone:
        - get_input: availability_zone_0
        port_lbd_dpdk_0_port_allowed_address_pairs:
        - ip_address: 0.0.0.0/1
        - ip_address: 128.0.0.0/1
        - ip_address: ::/1
        - ip_address: 8000::/1
        vm_image_name:
          get_input: lbd_image_name
        port_lbd_dpdk_0_port_name:
        - str_replace:
            template: $PREFIX$DELeth1
            params:
              $PREFIX:
                get_input: lbd_name_0
              $DEL:
                get_input: vcscf_name_delimeter
        port_lbd_dpdk_0_port_ip_requirements:
        - ip_version: 4
          ip_count_required:
            is_required: true
          floating_ip_count_required:
            is_required: false
        port_lbd_ims_core_0_port_network:
        - get_input: ims_core_net_id
        port_lbd_dpdk_0_port_network:
        - cscf_internal_dpdk_network_0
        port_lbd_ims_core_0_port_mac_requirements:
          mac_count_required:
            is_required: false
        port_lbd_ims_core_0_port_allowed_address_pairs:
        - ip_address:
            get_input: lbd_ims_core_v6_vip_0
        port_lbd_internal_0_port_name:
        - str_replace:
            template: $PREFIX$DELeth0
            params:
              $PREFIX:
                get_input: lbd_name_0
              $DEL:
                get_input: vcscf_name_delimeter
        port_lbd_ims_core_0_port_network_role_tag: ims_core
        compute_lbd_scheduler_hints:
        - group: lbd_server_group_group
        port_lbd_internal_0_port_mac_requirements:
          mac_count_required:
            is_required: false
        port_lbd_ims_core_0_port_fixed_ips:
        - ip_address:
            get_input: lbd_ims_core_v6_ip_0
        port_lbd_ims_core_0_port_ip_requirements:
        - ip_version: 4
          ip_count_required:
            is_required: true
          floating_ip_count_required:
            is_required: true
        port_lbd_internal_0_port_fixed_ips:
        - ip_address:
            get_input: lbd_internal_ip_0
        port_lbd_internal_0_port_network:
        - cscf_internal_network_0
        port_lbd_dpdk_0_port_mac_requirements:
          mac_count_required:
            is_required: false
        compute_lbd_metadata:
        - vf_module_id:
            get_input: vf_module_id
          vm_role: lbd
          vnf_id:
            get_input: vnf_id
          vnf_name:
            get_input: vnf_name
          vf_module_name:
            get_input: vf_module_name
        compute_lbd_name:
        - get_input: lbd_name_0
        port_lbd_internal_0_port_ip_requirements:
        - ip_version: 4
          ip_count_required:
            is_required: true
          floating_ip_count_required:
            is_required: false
        port_lbd_ims_core_0_port_security_groups:
        - - cscf_RSG
        port_lbd_ims_core_0_port_name:
        - str_replace:
            template: $PREFIX$DELeth2
            params:
              $PREFIX:
                get_input: lbd_name_0
              $DEL:
                get_input: vcscf_name_delimeter
        service_template_filter:
          substitute_service_template: Nested_lbd_1ServiceTemplate.yaml
          count: 1
        index_value:
          get_property:
          - SELF
          - service_template_filter
          - index_value
      requirements:
      - link_lbd_lbd_internal_0_port:
          capability: tosca.capabilities.network.Linkable
          node: cscf_internal_network_0
          relationship: tosca.relationships.network.LinksTo
      - dependency_lbd_lbd_internal_0_port:
          capability: tosca.capabilities.Node
          node: cscf_internal_network_0
          relationship: tosca.relationships.DependsOn
      - link_lbd_lbd_dpdk_0_port:
          capability: tosca.capabilities.network.Linkable
          node: cscf_internal_dpdk_network_0
          relationship: tosca.relationships.network.LinksTo
      - dependency_lbd_lbd_dpdk_0_port:
          capability: tosca.capabilities.Node
          node: cscf_internal_dpdk_network_0
          relationship: tosca.relationships.DependsOn
    cscf_zone_0_RRG:
      type: org.openecomp.resource.abstract.nodes.heat.cscf
      directives:
      - substitutable
      properties:
        vf_module_id:
          get_input: vf_module_id
        internal_net_id: cscf_internal_network_0
        vcscf_release:
          get_input: vcscf_release
        cscf_internal_ips:
          get_input: cscf_internal_zone_0_ips
        vcscf_gateway:
          get_input: oam_internal_vip_0
        vnf_name:
          get_input: vnf_name
        vf_module_name:
          get_input: vf_module_name
        cscf_image_name:
          get_input: cscf_image_name
        cscf_names:
          get_input: cscf_zone_0_names
        service_template_filter:
          substitute_service_template: nested_cscfServiceTemplate.yaml
          count:
            get_input: cscf_zone_0_count
          mandatory: false
        vcscf_swrepo_address:
          get_input: vcscf_swrepo_address
        cscf_uuids:
          get_input: cscf_zone_0_uuids
        vnf_id:
          get_input: vnf_id
        availability_zone_0:
          get_input: availability_zone_0
        cscf_internal_v6_ips:
          get_input: cscf_internal_zone_0_v6_ips
        cscf_flavor_name:
          get_input: cscf_flavor_name
        vcscf_cmrepo_address:
          get_input: vcscf_cmrepo_address
        vcscf_dns_address:
          get_input: vcscf_dns_address
        vcscf_internal_network_mtu:
          get_input: vcscf_internal_network_mtu
        port_cscf_internal_0_port_0_ip_requirements:
        - ip_version: 6
          ip_count_required:
            is_required: true
          floating_ip_count_required:
            is_required: false
        index:
          get_property:
          - SELF
          - service_template_filter
          - index_value
        vcscf_internal_netmask:
          get_input: vcscf_internal_netmask
        vcscf_name_delimeter:
          get_input: vcscf_name_delimeter
        port_cscf_internal_0_port_0_network_role_tag: internal
        vcscf_dn:
          get_input: vcscf_dn
        vcscf_du:
          get_input: vcscf_du
        port_cscf_internal_0_port_0_mac_requirements:
          mac_count_required:
            is_required: false
        cscf_security_group: cscf_RSG
      requirements:
      - link_cscf_internal_0_port_0:
          capability: tosca.capabilities.network.Linkable
          node: cscf_internal_network_0
          relationship: tosca.relationships.network.LinksTo
      - dependency_cscf_server_0:
          capability: tosca.capabilities.Node
          node: cscf_internal_network_0
          relationship: tosca.relationships.DependsOn
    lbd_internal_dpdk_vip_1_port:
      type: org.openecomp.resource.cp.nodes.heat.network.neutron.Port
      properties:
        ip_requirements:
        - ip_version: 4
          ip_count_required:
            is_required: true
          floating_ip_count_required:
            is_required: false
        security_groups:
        - cscf_RSG
        fixed_ips:
        - ip_address:
            get_input: lbd_internal_dpdk_vip_0
        mac_requirements:
          mac_count_required:
            is_required: false
        name:
          str_replace:
            template: $NAME$DELlbd$DELinternal$DELdpdk$DELvip
            params:
              $NAME:
                get_input: vnf_name
              $DEL:
                get_input: vcscf_name_delimeter
        network: cscf_internal_dpdk_network_0
      requirements:
      - link:
          capability: tosca.capabilities.network.Linkable
          node: cscf_internal_dpdk_network_0
          relationship: tosca.relationships.network.LinksTo
      - dependency:
          capability: tosca.capabilities.Node
          node: cscf_internal_dpdk_network_0
          relationship: tosca.relationships.DependsOn
    cif_oam_vip_3_port:
      type: org.openecomp.resource.cp.nodes.heat.network.neutron.Port
      properties:
        ip_requirements:
        - ip_version: 4
          ip_count_required:
            is_required: true
          floating_ip_count_required:
            is_required: false
        security_groups:
        - cscf_RSG
        fixed_ips:
        - ip_address:
            get_input: cif_oam_vip_1
        mac_requirements:
          mac_count_required:
            is_required: false
        name:
          str_replace:
            template: $NAME$DELcif$DELoam$DELvip1
            params:
              $NAME:
                get_input: vnf_name
              $DEL:
                get_input: vcscf_name_delimeter
        network_role_tag: oam
        network:
          get_input: oam_net_id
    cdi_ims_core_v6_vip_1_port:
      type: org.openecomp.resource.cp.nodes.heat.network.neutron.Port
      properties:
        ip_requirements:
        - ip_version: 4
          ip_count_required:
            is_required: true
          floating_ip_count_required:
            is_required: false
        security_groups:
        - cscf_RSG
        fixed_ips:
        - ip_address:
            get_input: cdi_ims_core_v6_vip_0
        mac_requirements:
          mac_count_required:
            is_required: false
        name:
          str_replace:
            template: $NAME$DELcdi$DELims$DELdb$DELvip$DELv6
            params:
              $NAME:
                get_input: vnf_name
              $DEL:
                get_input: vcscf_name_delimeter
        network_role_tag: ims_core
        network:
          get_input: ims_core_net_id
    abstract_cif:
      type: org.openecomp.resource.abstract.nodes.cif
      directives:
      - substitutable
      properties:
        port_cif_ims_core_0_port_network:
        - get_input: ims_core_net_id
        port_cif_oam_0_port_1_name:
        - str_replace:
            template: $PREFIX$DELeth1
            params:
              $PREFIX:
                get_input: cif_name_0
              $DEL:
                get_input: vcscf_name_delimeter
        port_cif_oam_0_port_1_allowed_address_pairs:
        - ip_address:
            get_input: cif_oam_vip_0
        port_cif_oam_0_port_1_fixed_ips:
        - ip_address:
            get_input: cif_oam_ip_0
        vm_flavor_name:
          get_input: cif_flavor_name
        port_cif_internal_0_port_name:
        - str_replace:
            template: $PREFIX$DELeth0
            params:
              $PREFIX:
                get_input: cif_name_0
              $DEL:
                get_input: vcscf_name_delimeter
        vm_image_name:
          get_input: cif_image_name
        compute_cif_user_data_format:
        - RAW
        port_cif_oam_0_port_1_ip_requirements:
        - ip_version: 4
          ip_count_required:
            is_required: true
          floating_ip_count_required:
            is_required: true
        port_cif_ims_li_0_port_fixed_ips:
        - ip_address:
            get_input: cif_ims_li_v6_ip_0
        compute_cif_scheduler_hints:
        - group: cif_server_group_group
        port_cif_oam_0_port_1_security_groups:
        - - cscf_RSG
        port_cif_ims_li_0_port_ip_requirements:
        - ip_version: 4
          ip_count_required:
            is_required: true
          floating_ip_count_required:
            is_required: true
        compute_cif_metadata:
        - vf_module_id:
            get_input: vf_module_id
          vm_role: cif
          vnf_id:
            get_input: vnf_id
          vnf_name:
            get_input: vnf_name
          vf_module_name:
            get_input: vf_module_name
        port_cif_ims_li_0_port_name:
        - str_replace:
            template: $PREFIX$DELeth4
            params:
              $PREFIX:
                get_input: cif_name_0
              $DEL:
                get_input: vcscf_name_delimeter
        port_cif_ims_core_0_port_fixed_ips:
        - ip_address:
            get_input: cif_ims_core_v6_ip_0
        port_cif_oam_0_port_3_network_role_tag: oam
        port_cif_ims_core_0_port_security_groups:
        - - cscf_RSG
        port_cif_ims_core_0_port_name:
        - str_replace:
            template: $PREFIX$DELeth2
            params:
              $PREFIX:
                get_input: cif_name_0
              $DEL:
                get_input: vcscf_name_delimeter
        port_cif_internal_0_port_network:
        - cscf_internal_network_0
        port_cif_oam_0_port_3_security_groups:
        - - cscf_RSG
        port_cif_ims_core_0_port_ip_requirements:
        - ip_version: 4
          ip_count_required:
            is_required: true
          floating_ip_count_required:
            is_required: true
        port_cif_ims_li_0_port_mac_requirements:
          mac_count_required:
            is_required: false
        port_cif_oam_0_port_1_network:
        - get_input: oam_net_id
        port_cif_ims_li_0_port_security_groups:
        - - cscf_RSG
        compute_cif_name:
        - get_input: cif_name_0
        compute_cif_availability_zone:
        - get_input: availability_zone_0
        port_cif_oam_0_port_1_network_role_tag: oam
        port_cif_oam_0_port_3_mac_requirements:
          mac_count_required:
            is_required: false
        port_cif_ims_core_0_port_allowed_address_pairs:
        - ip_address:
            get_input: cif_ims_core_v6_vip_0
        port_cif_oam_0_port_3_fixed_ips:
        - ip_address:
            get_input: cif_oam_ip_2
        port_cif_ims_core_0_port_network_role_tag: ims_core
        port_cif_ims_li_0_port_allowed_address_pairs:
        - ip_address:
            get_input: cif_ims_li_v6_vip_0
        port_cif_internal_0_port_mac_requirements:
          mac_count_required:
            is_required: false
        port_cif_ims_li_0_port_network:
        - get_input: ims_li_v6_net_id
        port_cif_internal_0_port_security_groups:
        - - cscf_RSG
        port_cif_ims_li_0_port_network_role_tag: ims_li_v6
        port_cif_oam_0_port_3_allowed_address_pairs:
        - ip_address:
            get_input: cif_oam_vip_1
        port_cif_internal_0_port_fixed_ips:
        - ip_address:
            get_input: cif_internal_ip_0
        - ip_address:
            get_input: cif_internal_v6_ip_0
        compute_cif_config_drive:
        - true
        port_cif_oam_0_port_3_name:
        - str_replace:
            template: $PREFIX$DELeth3
            params:
              $PREFIX:
                get_input: cif_name_0
              $DEL:
                get_input: vcscf_name_delimeter
        port_cif_oam_0_port_3_network:
        - get_input: oam_net_id
        port_cif_ims_core_0_port_mac_requirements:
          mac_count_required:
            is_required: false
        port_cif_internal_0_port_allowed_address_pairs:
        - ip_address:
            get_input: cif_internal_vip_0
        port_cif_oam_0_port_1_mac_requirements:
          mac_count_required:
            is_required: false
        port_cif_oam_0_port_3_ip_requirements:
        - ip_version: 4
          ip_count_required:
            is_required: true
          floating_ip_count_required:
            is_required: true
        port_cif_internal_0_port_ip_requirements:
        - ip_version: 4
          ip_count_required:
            is_required: true
          floating_ip_count_required:
            is_required: true
        service_template_filter:
          substitute_service_template: Nested_cifServiceTemplate.yaml
          count: 1
        index_value:
          get_property:
          - SELF
          - service_template_filter
          - index_value
      requirements:
      - link_cif_cif_internal_0_port:
          capability: tosca.capabilities.network.Linkable
          node: cscf_internal_network_0
          relationship: tosca.relationships.network.LinksTo
      - dependency_cif_cif_internal_0_port:
          capability: tosca.capabilities.Node
          node: cscf_internal_network_0
          relationship: tosca.relationships.DependsOn
    abstract_cif_1:
      type: org.openecomp.resource.abstract.nodes.cif_1
      directives:
      - substitutable
      properties:
        port_cif_oam_1_port_1_name:
        - str_replace:
            template: $PREFIX$DELeth1
            params:
              $PREFIX:
                get_input: cif_name_1
              $DEL:
                get_input: vcscf_name_delimeter
        port_cif_ims_core_1_port_security_groups:
        - - cscf_RSG
        port_cif_oam_1_port_1_mac_requirements:
          mac_count_required:
            is_required: false
        port_cif_oam_1_port_3_network:
        - get_input: oam_net_id
        vm_flavor_name:
          get_input: cif_flavor_name
        vm_image_name:
          get_input: cif_image_name
        compute_cif_user_data_format:
        - RAW
        port_cif_oam_1_port_3_allowed_address_pairs:
        - ip_address:
            get_input: cif_oam_vip_1
        compute_cif_scheduler_hints:
        - group: cif_server_group_group
        port_cif_oam_1_port_3_ip_requirements:
        - ip_version: 4
          ip_count_required:
            is_required: true
          floating_ip_count_required:
            is_required: true
        port_cif_internal_1_port_security_groups:
        - - cscf_RSG
        port_cif_oam_1_port_1_network:
        - get_input: oam_net_id
        port_cif_ims_core_1_port_network_role_tag: ims_core
        port_cif_ims_li_1_port_security_groups:
        - - cscf_RSG
        port_cif_ims_li_1_port_allowed_address_pairs:
        - ip_address:
            get_input: cif_ims_li_v6_vip_0
        port_cif_internal_1_port_allowed_address_pairs:
        - ip_address:
            get_input: cif_internal_vip_0
        port_cif_oam_1_port_3_security_groups:
        - - cscf_RSG
        compute_cif_metadata:
        - vf_module_id:
            get_input: vf_module_id
          vm_role: cif
          vnf_id:
            get_input: vnf_id
          vnf_name:
            get_input: vnf_name
          vf_module_name:
            get_input: vf_module_name
        port_cif_oam_1_port_1_fixed_ips:
        - ip_address:
            get_input: cif_oam_ip_1
        port_cif_internal_1_port_network:
        - cscf_internal_network_0
        port_cif_ims_core_1_port_network:
        - get_input: ims_core_net_id
        port_cif_oam_1_port_3_fixed_ips:
        - ip_address:
            get_input: cif_oam_ip_3
        port_cif_oam_1_port_1_ip_requirements:
        - ip_version: 4
          ip_count_required:
            is_required: true
          floating_ip_count_required:
            is_required: true
        port_cif_ims_core_1_port_mac_requirements:
          mac_count_required:
            is_required: false
        compute_cif_name:
        - get_input: cif_name_1
        compute_cif_availability_zone:
        - get_input: availability_zone_1
        port_cif_internal_1_port_ip_requirements:
        - ip_version: 4
          ip_count_required:
            is_required: true
          floating_ip_count_required:
            is_required: true
        port_cif_ims_li_1_port_name:
        - str_replace:
            template: $PREFIX$DELeth4
            params:
              $PREFIX:
                get_input: cif_name_1
              $DEL:
                get_input: vcscf_name_delimeter
        port_cif_internal_1_port_name:
        - str_replace:
            template: $PREFIX$DELeth0
            params:
              $PREFIX:
                get_input: cif_name_1
              $DEL:
                get_input: vcscf_name_delimeter
        port_cif_ims_li_1_port_fixed_ips:
        - ip_address:
            get_input: cif_ims_li_v6_ip_1
        port_cif_internal_1_port_mac_requirements:
          mac_count_required:
            is_required: false
        port_cif_ims_li_1_port_mac_requirements:
          mac_count_required:
            is_required: false
        port_cif_ims_li_1_port_ip_requirements:
        - ip_version: 4
          ip_count_required:
            is_required: true
          floating_ip_count_required:
            is_required: true
        port_cif_ims_core_1_port_fixed_ips:
        - ip_address:
            get_input: cif_ims_core_v6_ip_1
        port_cif_ims_core_1_port_allowed_address_pairs:
        - ip_address:
            get_input: cif_ims_core_v6_vip_0
        port_cif_oam_1_port_1_network_role_tag: oam
        port_cif_oam_1_port_3_mac_requirements:
          mac_count_required:
            is_required: false
        port_cif_ims_core_1_port_ip_requirements:
        - ip_version: 4
          ip_count_required:
            is_required: true
          floating_ip_count_required:
            is_required: true
        port_cif_ims_li_1_port_network:
        - get_input: ims_li_v6_net_id
        port_cif_internal_1_port_fixed_ips:
        - ip_address:
            get_input: cif_internal_ip_1
        - ip_address:
            get_input: cif_internal_v6_ip_1
        port_cif_ims_core_1_port_name:
        - str_replace:
            template: $PREFIX$DELeth2
            params:
              $PREFIX:
                get_input: cif_name_1
              $DEL:
                get_input: vcscf_name_delimeter
        compute_cif_config_drive:
        - true
        port_cif_oam_1_port_3_name:
        - str_replace:
            template: $PREFIX$DELeth3
            params:
              $PREFIX:
                get_input: cif_name_0
              $DEL:
                get_input: vcscf_name_delimeter
        port_cif_ims_li_1_port_network_role_tag: ims_li_v6
        port_cif_oam_1_port_1_security_groups:
        - - cscf_RSG
        port_cif_oam_1_port_1_allowed_address_pairs:
        - ip_address:
            get_input: cif_oam_vip_0
        port_cif_oam_1_port_3_network_role_tag: oam
        service_template_filter:
          substitute_service_template: Nested_cif_1ServiceTemplate.yaml
          count: 1
        index_value:
          get_property:
          - SELF
          - service_template_filter
          - index_value
      requirements:
      - link_cif_cif_internal_1_port:
          capability: tosca.capabilities.network.Linkable
          node: cscf_internal_network_0
          relationship: tosca.relationships.network.LinksTo
      - dependency_cif_cif_internal_1_port:
          capability: tosca.capabilities.Node
          node: cscf_internal_network_0
          relationship: tosca.relationships.DependsOn
  groups:
    tdcore_zone_0_server_group_group:
      type: tosca.groups.Root
      members: [
        ]
    tdcore_zone_1_server_group_group:
      type: tosca.groups.Root
      members: [
        ]
    oam_server_group_group:
      type: tosca.groups.Root
      members:
      - abstract_oam
      - abstract_oam_1
      - abstract_oam_2
    cdi_server_group_group:
      type: tosca.groups.Root
      members:
      - abstract_cdi
      - abstract_cdi_1
    cif_server_group_group:
      type: tosca.groups.Root
      members:
      - abstract_cif
      - abstract_cif_1
    base_cscf_group:
      type: org.openecomp.groups.heat.HeatStack
      properties:
        heat_file: ../Artifacts/base_cscf.yaml
        description: |
          CFX-5000 N+K VNF HOT template for AT&T.
      members:
      - cscf_RSG
      - cdi_internal_v6_vip_0_port
      - cscf_internal_dpdk_network_0
      - cif_ims_core_v6_vip_2_port
      - cif_internal_vip_0_port
      - cscf_zone_1_RRG
      - oam_oam_vip_1_port
      - tdcore_zone_0_RRG
      - lbd_ims_core_v6_vip_2_port
      - cif_oam_vip_1_port
      - oam_internal_vip_0_port
      - tdcore_zone_1_RRG
      - cif_ims_li_v6_vip_4_port
      - cscf_internal_network_0
      - cscf_zone_0_RRG
      - lbd_internal_dpdk_vip_1_port
      - cif_oam_vip_3_port
      - cdi_ims_core_v6_vip_1_port
      - abstract_lbd
      - abstract_lbd_1
      - abstract_cif
      - abstract_cif_1
      - abstract_oam
      - abstract_oam_1
      - abstract_oam_2
      - abstract_cdi
      - abstract_cdi_1
    base_cscf_volume_group:
      type: org.openecomp.groups.heat.HeatStack
      properties:
        heat_file: ../Artifacts/base_cscf_volume.yaml
        description: Volume template for CFX
      members:
      - oam_volume_1
      - oam_volume_0
      - cif_volume_0
      - cif_volume_1
    lbd_server_group_group:
      type: tosca.groups.Root
      members:
      - abstract_lbd
      - abstract_lbd_1
  outputs:
    oam_volume_id_1:
      description: volume id for second oam
      value: oam_volume_1
    oam_volume_id_0:
      description: volume id for first oam
      value: oam_volume_0
    cif_volume_id_0:
      description: volume id for first cif
      value: cif_volume_0
    cif_volume_id_1:
      description: volume id for second cif
      value: cif_volume_1
  policies:
    oam_server_group_policy:
      type: org.openecomp.policies.placement.Antilocate
      properties:
        name:
          str_replace:
            template: $VNF$DELoam$DELgroup
            params:
              $DEL:
                get_input: vcscf_name_delimeter
              $VNF:
                get_input: vnf_name
        container_type: host
      targets:
      - oam_server_group_group
    cdi_server_group_policy:
      type: org.openecomp.policies.placement.Antilocate
      properties:
        name:
          str_replace:
            template: $VNF$DELcdi$DELgroup
            params:
              $DEL:
                get_input: vcscf_name_delimeter
              $VNF:
                get_input: vnf_name
        container_type: host
      targets:
      - cdi_server_group_group
    lbd_server_group_policy:
      type: org.openecomp.policies.placement.Antilocate
      properties:
        name:
          str_replace:
            template: $VNF$DELlbd$DELgroup
            params:
              $DEL:
                get_input: vcscf_name_delimeter
              $VNF:
                get_input: vnf_name
        container_type: host
      targets:
      - lbd_server_group_group
    tdcore_zone_0_server_group_policy:
      type: org.openecomp.policies.placement.Antilocate
      properties:
        name:
          str_replace:
            template: $VNF$DELtdcore$DELzone0$DELgroup
            params:
              $DEL:
                get_input: vcscf_name_delimeter
              $VNF:
                get_input: vnf_name
        container_type: host
      targets:
      - tdcore_zone_0_server_group_group
    cif_server_group_policy:
      type: org.openecomp.policies.placement.Antilocate
      properties:
        name:
          str_replace:
            template: $VNF$DELcif$DELgroup
            params:
              $DEL:
                get_input: vcscf_name_delimeter
              $VNF:
                get_input: vnf_name
        container_type: host
      targets:
      - cif_server_group_group
    tdcore_zone_1_server_group_policy:
      type: org.openecomp.policies.placement.Antilocate
      properties:
        name:
          str_replace:
            template: $VNF$DELtdcore$DELzone1$DELgroup
            params:
              $DEL:
                get_input: vcscf_name_delimeter
              $VNF:
                get_input: vnf_name
        container_type: host
      targets:
      - tdcore_zone_1_server_group_group