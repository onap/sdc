<?xml version="1.0" encoding="UTF-8"?>
<configuration scan="true" scanPeriod="5 seconds">

    <property scope="system" name="ECOMP-component-name" value="SDC"/>
    <property scope="system" name="ECOMP-subcomponent-name" value="SDC-BE"/>
    <property file="${config.home}/catalog-be/configuration.yaml"/>
    <property scope="context" name="enable-all-log" value="false"/>
    <property name="p_msg" value="%replace(%replace(%replace(%replace(%msg){'\t','\\\\t'}){'\n', '\\\\n'}){'\\\|', '-'}){'\r','\\\\r'}"/>
    <property name="p_ex" value="%replace(%replace(%replace(%replace(%exception{full}){'\t','\\\\t'}){'\n', '\\\\n'}){'\\\|', '-'}){'\r','\\\\r'}"/>
    <property name="p_debugInfo" value="%replace(%replace(%replace(%replace(%thread#%level#%logger{35}#%msg){'\t','\\\\t'}){'\n', '\\\\n'}){'\\\|', '-'}){'\r','\\\\r'}"/>

    <property name="all-log-pattern"
              value="%date{yyyy-MM-dd'T'HH:mm:ss.SSSXXX}|%X{BeginTimestamp}|%X{EndTimestamp}|%X{uuid}|%X{serviceInstanceID}|%thread|%X{ServerName}|%X{ServiceName}|${ECOMP-subcomponent-name}|%X{userId}|%X{TargetEntity}|%X{TargetServiceName}|%X{StatusCode}|%X{ResponseCode}|%X{ResponseDescription}|%X{InstanceID}|%level|%X{alarmSeverity}|%X{localAddr}|%X{ElapsedTime}|${beFqdn}|%X{remoteAddr}|%logger{35}|%X{timer}|ActivityType=&lt;%M&gt;, Desc=&lt;${p_msg}&gt;%n"/>

    <!-- All log -->
    <if condition='property("enable-all-log").equalsIgnoreCase("true")'>
        <then>
            <appender name="ALL_ROLLING" class="ch.qos.logback.core.ConsoleAppender">
                <encoder>
                    <pattern>${all-log-pattern}</pattern>
                </encoder>
            </appender>
        </then>
    </if>


    <!-- Debug log -->
    <appender name="DEBUG_ROLLING" class="ch.qos.logback.core.ConsoleAppender">
        <encoder>
            <pattern>${debug-log-pattern}</pattern>
        </encoder>
    </appender>

    <!-- Error log -->
    <appender name="ERROR_ROLLING" class="ch.qos.logback.core.ConsoleAppender">
        <encoder>
            <pattern>${error-log-pattern}</pattern>
        </encoder>
    </appender>

    <!-- Audit log -->
    <appender name="AUDIT_ROLLING" class="ch.qos.logback.core.ConsoleAppender">
        <encoder>
            <pattern>${audit-log-pattern}</pattern>
        </encoder>
    </appender>

    <!-- Metrics log -->
    <appender name="METRICS_ROLLING" class="ch.qos.logback.core.ConsoleAppender">
        <encoder>
            <pattern>${metric-log-pattern}</pattern>
        </encoder>
    </appender>

    <!-- Supportability log -->
    <appender name="SUPPORTABILITY_ROLLING" class="ch.qos.logback.core.ConsoleAppender">
        <encoder>
            <pattern>${supportability-log-pattern}</pattern>
        </encoder>
    </appender>

    <!-- Asynchronicity Configurations -->
    <appender name="ASYNC_DEBUG" class="ch.qos.logback.classic.AsyncAppender">
        <appender-ref ref="DEBUG_ROLLING"/>
    </appender>

    <appender name="ASYNC_ERROR" class="ch.qos.logback.classic.AsyncAppender">
        <appender-ref ref="ERROR_ROLLING"/>
    </appender>

    <appender name="ASYNC_ALL" class="ch.qos.logback.classic.AsyncAppender">
        <appender-ref ref="ALL_ROLLING"/>
    </appender>

    <root level="INFO">
        <appender-ref ref="ASYNC_DEBUG"/>
        <appender-ref ref="ASYNC_ERROR"/>
        <appender-ref ref="AUDIT_ROLLING"/>
        <appender-ref ref="METRICS_ROLLING"/>
        <appender-ref ref="SUPPORTABILITY_ROLLING"/>
        <if condition='property("enable-all-log").equalsIgnoreCase("true")'>
            <then>
                <appender-ref ref="ASYNC_ALL"/>
            </then>
        </if>
    </root>

    <logger name="org.openecomp.sdc" level="INFO"/>
</configuration>
