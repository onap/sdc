{
  "comments": [
    {
      "key": {
        "uuid": "d17531d1_677424da",
        "filename": "catalog-be/src/main/java/org/openecomp/sdc/be/user/UserBusinessLogic.java",
        "patchSetId": 3
      },
      "lineNbr": 91,
      "author": {
        "id": 5269
      },
      "writtenOn": "2022-01-21T09:14:03Z",
      "side": 1,
      "message": "Hi Jeff, can you explain how this addresses the problem",
      "range": {
        "startLine": 89,
        "startChar": 3,
        "endLine": 91,
        "endChar": 60
      },
      "revId": "0a9b9225b8ec10c7307d891627463930db296058",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "577350e5_fe8d9f24",
        "filename": "catalog-be/src/main/java/org/openecomp/sdc/be/user/UserBusinessLogic.java",
        "patchSetId": 3
      },
      "lineNbr": 91,
      "author": {
        "id": 6708
      },
      "writtenOn": "2022-01-24T09:06:04Z",
      "side": 1,
      "message": "Hey Michael, encoding to base64 is the last step of encrypting and the first step of decrypting, so this is done to check if the string being decrypted is actually in base64. It won\u0027t work 100% all the time since some strings might just happen to be base64, so it would fail the decrypt and the decrypt error would still appear in the logs.",
      "parentUuid": "d17531d1_677424da",
      "range": {
        "startLine": 89,
        "startChar": 3,
        "endLine": 91,
        "endChar": 60
      },
      "revId": "0a9b9225b8ec10c7307d891627463930db296058",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ebe2e369_8209e825",
        "filename": "catalog-be/src/main/java/org/openecomp/sdc/be/user/UserBusinessLogic.java",
        "patchSetId": 3
      },
      "lineNbr": 91,
      "author": {
        "id": 5565
      },
      "writtenOn": "2022-01-24T11:32:57Z",
      "side": 1,
      "message": "The issue you are having in fact it is because the org.onap.portalsdk.core.onboarding.util.CipherUtil class is logging a decryption failure as an error and then throwing the exception. Therefore, you want to avoid calling the method if the string is not a base64, correct?\n\nI would recommend to use the Apache commons library (I think we use in the project) to check that: https://commons.apache.org/proper/commons-codec/apidocs/org/apache/commons/codec/binary/Base64.html#isBase64-byte-.\n\nWe could disable logging for that specific class if wanted.",
      "parentUuid": "577350e5_fe8d9f24",
      "range": {
        "startLine": 89,
        "startChar": 3,
        "endLine": 91,
        "endChar": 60
      },
      "revId": "0a9b9225b8ec10c7307d891627463930db296058",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e4127be2_76c4a4eb",
        "filename": "catalog-be/src/main/java/org/openecomp/sdc/be/user/UserBusinessLogic.java",
        "patchSetId": 3
      },
      "lineNbr": 91,
      "author": {
        "id": 6708
      },
      "writtenOn": "2022-01-24T14:10:20Z",
      "side": 1,
      "message": "Yeah that\u0027s the idea Andr√©. \n\nI tested that method and it will evaluate something like \"jh003\" as true which it shouldn\u0027t be. According to the documentation it \"Tests a given byte array to see if it contains only valid characters within the Base64 alphabet. Currently the method treats whitespace as valid.\", so this will give a lot of false positives I believe.",
      "parentUuid": "ebe2e369_8209e825",
      "range": {
        "startLine": 89,
        "startChar": 3,
        "endLine": 91,
        "endChar": 60
      },
      "revId": "0a9b9225b8ec10c7307d891627463930db296058",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "542d117d_c789e8c1",
        "filename": "catalog-be/src/main/java/org/openecomp/sdc/be/user/UserBusinessLogic.java",
        "patchSetId": 3
      },
      "lineNbr": 91,
      "author": {
        "id": 5565
      },
      "writtenOn": "2022-01-24T15:03:09Z",
      "side": 1,
      "message": "I see... Not sure if there is a better way to check it.\nSo, for now, I would say that you should separate what you are doing here in a new method, maybe \"boolean isUserBase64Encoded(String userId)\" which should never break (make sure no exceptions will happen no matter the input, safer to put in a try catch). Also, add unit tests to check it.",
      "parentUuid": "e4127be2_76c4a4eb",
      "range": {
        "startLine": 89,
        "startChar": 3,
        "endLine": 91,
        "endChar": 60
      },
      "revId": "0a9b9225b8ec10c7307d891627463930db296058",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    }
  ]
}