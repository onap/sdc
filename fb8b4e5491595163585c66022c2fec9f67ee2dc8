{
  "comments": [
    {
      "key": {
        "uuid": "9edddff8_3293f76e",
        "filename": "catalog-be/src/main/java/org/openecomp/sdc/be/components/impl/ComponentInstanceBusinessLogic.java",
        "patchSetId": 2
      },
      "lineNbr": 3072,
      "author": {
        "id": 5269
      },
      "writtenOn": "2022-09-22T17:07:01Z",
      "side": 1,
      "message": "This change would mean that the marking of a req or cap as external on a component instance would be lost when the version is updated.\nThe original code was flawed in that any reqs/caps not marked as external were lost. \nI think the correct solution is:\nwhere a req/cap has been marked as external in \"resResourceInfo\", update the existing definition in the req/caps in \"component\". Note there may not be a corresponding cap/req in \"component\" in which case nothing needs to be done for that req/cap",
      "range": {
        "startLine": 3071,
        "startChar": 7,
        "endLine": 3072,
        "endChar": 69
      },
      "revId": "fb8b4e5491595163585c66022c2fec9f67ee2dc8",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0f237072_7e27f279",
        "filename": "catalog-be/src/main/java/org/openecomp/sdc/be/components/impl/ComponentInstanceBusinessLogic.java",
        "patchSetId": 2
      },
      "lineNbr": 3072,
      "author": {
        "id": 5565
      },
      "writtenOn": "2022-09-26T08:52:13Z",
      "side": 1,
      "message": "Yes, correct, that is what I\u0027ve had recommended to do.\nYou should take all the new version capabilities and requirements, then compare with the previous ones if there is any marked as \"external\" and mark in the new ones.",
      "parentUuid": "9edddff8_3293f76e",
      "range": {
        "startLine": 3071,
        "startChar": 7,
        "endLine": 3072,
        "endChar": 69
      },
      "revId": "fb8b4e5491595163585c66022c2fec9f67ee2dc8",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "56452c61_ca23c728",
        "filename": "catalog-be/src/main/java/org/openecomp/sdc/be/components/impl/ComponentInstanceBusinessLogic.java",
        "patchSetId": 2
      },
      "lineNbr": 3072,
      "author": {
        "id": 8050
      },
      "writtenOn": "2022-09-28T09:50:16Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0f237072_7e27f279",
      "range": {
        "startLine": 3071,
        "startChar": 7,
        "endLine": 3072,
        "endChar": 69
      },
      "revId": "fb8b4e5491595163585c66022c2fec9f67ee2dc8",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "12917fc4_219b905c",
        "filename": "catalog-be/src/main/java/org/openecomp/sdc/be/components/merge/instance/ComponentInstanceRelationMerge.java",
        "patchSetId": 2
      },
      "lineNbr": 188,
      "author": {
        "id": 5565
      },
      "writtenOn": "2022-09-26T08:52:13Z",
      "side": 1,
      "message": "could you explain this change? It seems that now you are getting all the relationships instead just the one that had the currentResourceInstance id.",
      "range": {
        "startLine": 188,
        "startChar": 109,
        "endLine": 188,
        "endChar": 121
      },
      "revId": "fb8b4e5491595163585c66022c2fec9f67ee2dc8",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d739b54c_5c98a554",
        "filename": "catalog-be/src/main/java/org/openecomp/sdc/be/components/merge/instance/ComponentInstanceRelationMerge.java",
        "patchSetId": 2
      },
      "lineNbr": 188,
      "author": {
        "id": 8050
      },
      "writtenOn": "2022-09-28T09:50:16Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "12917fc4_219b905c",
      "range": {
        "startLine": 188,
        "startChar": 109,
        "endLine": 188,
        "endChar": 121
      },
      "revId": "fb8b4e5491595163585c66022c2fec9f67ee2dc8",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ae03a6f7_ae814d82",
        "filename": "catalog-be/src/main/java/org/openecomp/sdc/be/components/merge/instance/ComponentInstanceRelationMerge.java",
        "patchSetId": 2
      },
      "lineNbr": 188,
      "author": {
        "id": 5269
      },
      "writtenOn": "2022-09-28T12:45:37Z",
      "side": 1,
      "message": "I dont see the explanation of this change?",
      "parentUuid": "d739b54c_5c98a554",
      "range": {
        "startLine": 188,
        "startChar": 109,
        "endLine": 188,
        "endChar": 121
      },
      "revId": "fb8b4e5491595163585c66022c2fec9f67ee2dc8",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a0858a2_4fe00d0b",
        "filename": "catalog-be/src/main/java/org/openecomp/sdc/be/components/merge/instance/ComponentInstanceRelationMerge.java",
        "patchSetId": 2
      },
      "lineNbr": 188,
      "author": {
        "id": 8050
      },
      "writtenOn": "2022-09-28T14:55:35Z",
      "side": 1,
      "message": "Since, we are passing getNodeFunc (function parameter), which will provide us the fromNode when called for relationFrom and toNode for relationTo, so we just need to check its Uid is equals to fromNode/ToNode which will get us the right data.",
      "parentUuid": "ae03a6f7_ae814d82",
      "range": {
        "startLine": 188,
        "startChar": 109,
        "endLine": 188,
        "endChar": 121
      },
      "revId": "fb8b4e5491595163585c66022c2fec9f67ee2dc8",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "11826ab3_0c75a8ca",
        "filename": "catalog-be/src/main/java/org/openecomp/sdc/be/components/merge/instance/ComponentInstanceRelationMerge.java",
        "patchSetId": 2
      },
      "lineNbr": 188,
      "author": {
        "id": 5565
      },
      "writtenOn": "2022-09-29T17:14:34Z",
      "side": 1,
      "message": "I still didn\u0027t get it.\nWe are looking for relationships that relates with the node in case, which is currentResourceInstance.\nThe previous code is getting the fromNode from each relationship and comparing with the currentResourceInstance.getUniqueId(). And do the same for the toNode. I\u0027m assuming the from/toNode are a node id.\nNow you are comparing fromNode/toNode of a relationship with its own id? The relationship id should have nothing do to with a node id. And you are ignoring the currentResourceInstance.\nThe getNodeFunc is nothing more than rel.getFromNode/rel.getToNode.",
      "parentUuid": "7a0858a2_4fe00d0b",
      "range": {
        "startLine": 188,
        "startChar": 109,
        "endLine": 188,
        "endChar": 121
      },
      "revId": "fb8b4e5491595163585c66022c2fec9f67ee2dc8",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fecc9a45_9d273e0f",
        "filename": "catalog-be/src/main/java/org/openecomp/sdc/be/components/merge/instance/ComponentInstanceRelationMerge.java",
        "patchSetId": 2
      },
      "lineNbr": 188,
      "author": {
        "id": 5269
      },
      "writtenOn": "2022-09-30T12:23:52Z",
      "side": 1,
      "message": "This change is causes the relations to be deleted when an instance version is updated. The uid is always null so no from/to relations are found.\nThe original code where the fromNode/toNode was compared with the component instance unique Id looked right to me. What problem are you trying to address by this change?",
      "parentUuid": "11826ab3_0c75a8ca",
      "range": {
        "startLine": 188,
        "startChar": 109,
        "endLine": 188,
        "endChar": 121
      },
      "revId": "fb8b4e5491595163585c66022c2fec9f67ee2dc8",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "63318200_99d5f966",
        "filename": "catalog-be/src/main/java/org/openecomp/sdc/be/components/merge/instance/ComponentInstanceRelationMerge.java",
        "patchSetId": 2
      },
      "lineNbr": 188,
      "author": {
        "id": 8050
      },
      "writtenOn": "2022-09-30T16:16:29Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fecc9a45_9d273e0f",
      "range": {
        "startLine": 188,
        "startChar": 109,
        "endLine": 188,
        "endChar": 121
      },
      "revId": "fb8b4e5491595163585c66022c2fec9f67ee2dc8",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9c5c0659_f679a27f",
        "filename": "catalog-be/src/main/java/org/openecomp/sdc/be/components/merge/instance/ComponentInstanceRelationMerge.java",
        "patchSetId": 2
      },
      "lineNbr": 188,
      "author": {
        "id": 5269
      },
      "writtenOn": "2022-10-03T18:20:43Z",
      "side": 1,
      "message": "I see now in testing that there is an issue here when the requirement for the node type is defined on the type it is derived from rather than the type itself (e.g. \u0027dependency\u0027 requirement that is defined on tosca.nodes.Root)\n\nHowever the fix you were proposing is still wrong. The issue looks to be caused by the  owner id not being correctly set (id of the node type it is defined on used rather than id of the component instance).\nI would suggest the following as a fix:\nNodeTemplateOperation: In method \u0027populateRequirement\u0027 remove the if statement on the setting of the ownerid",
      "parentUuid": "63318200_99d5f966",
      "range": {
        "startLine": 188,
        "startChar": 109,
        "endLine": 188,
        "endChar": 121
      },
      "revId": "fb8b4e5491595163585c66022c2fec9f67ee2dc8",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a7683cd_34d05bc3",
        "filename": "catalog-be/src/main/java/org/openecomp/sdc/be/components/merge/instance/ComponentInstanceRelationMerge.java",
        "patchSetId": 2
      },
      "lineNbr": 188,
      "author": {
        "id": 8050
      },
      "writtenOn": "2022-10-04T13:03:05Z",
      "side": 1,
      "message": "I have made the changes and now it works fine.",
      "parentUuid": "9c5c0659_f679a27f",
      "range": {
        "startLine": 188,
        "startChar": 109,
        "endLine": 188,
        "endChar": 121
      },
      "revId": "fb8b4e5491595163585c66022c2fec9f67ee2dc8",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    }
  ]
}