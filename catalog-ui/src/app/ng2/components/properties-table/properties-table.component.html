<div class="properties-table">
    <loader [display]="isLoading" size="large" [relative]="false"></loader>
    <div class="table-header">
        <div class="table-cell col1">Property Name</div>
        <div class="table-cell col2">Type</div>
        <div class="table-cell col3">ES</div>
        <div class="table-cell valueCol">Value</div>
    </div>
    <div class="table-body">
        <div class="no-data" *ngIf="!feInstancesNames || !feInstancesNames.length">No data to display</div>

        <ng-container *ngFor="let instanceName of feInstancesNames; trackBy:instanceName">
            <div class="table-rows-header white-sub-header">{{instanceName | contentAfterLastDot}}</div>

            <div class="table-row"
                *ngFor="let property of fePropertiesMap[instanceName] | searchFilter:'name':searchTerm; trackBy:property?.name"
                (click)="onClickPropertyRow(property, instanceName, $event)"
                [ngClass]="{'selected': selectedPropertyId && selectedPropertyId === property.name }">

                <div class="table-cell col1" [ngClass]="{'filtered':property.name === propertyNameSearchText}" [class.round-checkbox]="property.isDeclared">
                <div class="property-name">
                    <checkbox [(checked)]="property.isSelected"
                          [disabled]="property.isDisabled || property.isDeclared || readonly"
                          (checkedChange)="propertyChecked(property)"></checkbox>
                    <div class="inner-cell-div" tooltip="{{property.name}}">
                        <span>{{property.name}}</span>
                    </div>
                </div>
                <span *ngIf="property.description" class="property-description-icon sprite-new show-desc" tooltip="{{property.description}}" tooltipDelay="0"></span>
                </div>
                <div class="table-cell col2">
                    <div class="inner-cell-div" tooltip="{{property.type | contentAfterLastDot}}">
                        <span>{{property.type | contentAfterLastDot}}</span>
                    </div>
                </div>
                <div class="table-cell col3">
                    <div *ngIf="property.schema && property.schema.property && property.schema.property.type" class="inner-cell-div" tooltip="{{property.schema.property.type | contentAfterLastDot}}">
                        <span>{{property.schema.property.type | contentAfterLastDot}}</span>
                    </div>
                </div>
                <div class="table-cell valueCol">
                    <!-- [ngClass]="{'filtered':property.name === propertyNameSearchText}" (selectProperty)="propertySelected(property, $event, flatProperty.propertiesName)" [propType]="property.type" [propSchema]="property.schema" [propKey]="" [propValue]="property.value"-->
                    <dynamic-property
                        [selectedPropertyId]="selectedPropertyId"
                        [canBeDeclared]="true"
                        [property]="property"
                        [expandedChildId]="property.expandedChildPropertyId"
                        [propertyNameSearchText]="propertyNameSearchText"
                        [readonly]="readonly"
                        (valueChanged)="propValueChanged(property);"
                        (expandChild)="property.updateExpandedChildPropertyId($event)"
                        (clickOnPropertyRow)="onClickPropertyInnerRow($event, instanceName)"
                        (checkProperty)="propertyChecked(property, $event)"
                        >
                    </dynamic-property>

                </div>
            </div>

        </ng-container>

    </div>
</div>
